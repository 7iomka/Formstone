/*! formstone v0.9.0 [lightbox.js] 2016-03-17 | MIT License | formstone.it */

!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition"],a):a(jQuery,Formstone)}(function(a,b){"use strict";function c(){Z=b.$body,$=a("html, body"),_=b.window.location.hash.replace("#","")}function d(){ba&&i()}function e(a){this.on(V.click,a,h);var b=this.data(R+"-gallery");!aa&&_&&b===_&&(aa=!0,this.trigger(V.click))}function f(){j(),this.off(V.namespace)}function g(b,c){b instanceof a&&h.apply(X,[{data:a.extend(!0,{},{$object:b},S,c||{})}])}function h(c){if(!ba){var d=c.data;ba=a.extend({},{visible:!1,gallery:{active:!1},isMobile:b.isMobile||d.mobile,isTouch:b.support.touch,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},d);var e=d.$el,f=d.$object,g=e&&e[0].href?e[0].href||"":"",h=e&&e[0].hash?e[0].hash||"":"",i=(g.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data(R+"-type"):""),k="image"===i||g.match(d.fileTypes)||"data:image"===g.substr(0,10),l=P(g),n="url"===i||!k&&!l&&"http"===g.substr(0,4)&&!h,p="element"===i||!k&&!l&&!n&&"#"===h.substr(0,1),q="undefined"!=typeof f;if(p&&(g=h),!(k||l||n||p||q))return void(ba=null);if(W.killEvent(c),ba.touch=d.touch&&ba.isMobile&&ba.isTouch,ba.margin*=2,ba.type=k?"image":l?"video":"element",k||l){var s=e.data(R+"-gallery");s&&(ba.gallery.active=!0,ba.gallery.id=s,ba.gallery.$items=a("a[data-lightbox-gallery= "+ba.gallery.id+"], a[rel= "+ba.gallery.id+"]"),ba.gallery.index=ba.gallery.$items.index(ba.$el),ba.gallery.total=ba.gallery.$items.length-1)}var t="";ba.isMobile||(t+='<div class="'+[T.raw.overlay,ba.theme,ba.customClass].join(" ")+'"></div>');var u=[T.raw.base,T.raw.loading,T.raw.animating,ba.theme,ba.customClass];ba.fixed&&u.push(T.raw.fixed),ba.isMobile&&u.push(T.raw.mobile),ba.isTouch&&u.push(T.raw.touch),n&&u.push(T.raw.iframed),(p||q)&&u.push(T.raw.inline),t+='<div class="'+u.join(" ")+'">',t+='<button type="button" class="'+T.raw.close+'">'+ba.labels.close+"</button>",t+='<span class="'+T.raw.loading_icon+'"></span>',t+='<div class="'+T.raw.container+'">',t+='<div class="'+T.raw.content+'">',(k||l)&&(t+='<div class="'+T.raw.tools+'">',t+='<div class="'+T.raw.controls+'">',ba.gallery.active&&(t+='<button type="button" class="'+[T.raw.control,T.raw.control_previous].join(" ")+'">'+ba.labels.previous+"</button>",t+='<button type="button" class="'+[T.raw.control,T.raw.control_next].join(" ")+'">'+ba.labels.next+"</button>"),ba.isMobile&&ba.isTouch&&(t+='<button type="button" class="'+[T.raw.caption_toggle].join(" ")+'">'+ba.labels.captionClosed+"</button>"),t+="</div>",t+='<div class="'+T.raw.meta+'">',ba.gallery.active&&(t+='<p class="'+T.raw.position+'"',ba.gallery.total<1&&(t+=' style="display: none;"'),t+=">",t+='<span class="'+T.raw.position_current+'">'+(ba.gallery.index+1)+"</span> ",t+=ba.labels.count,t+=' <span class="'+T.raw.position_total+'">'+(ba.gallery.total+1)+"</span>",t+="</p>"),t+='<div class="'+T.raw.caption+'">',t+=ba.formatter.call(e,d),t+="</div></div>",t+="</div>"),t+="</div></div></div>",Z.append(t),ba.$overlay=a(T.overlay),ba.$lightbox=a(T.base),ba.$close=a(T.close),ba.$container=a(T.container),ba.$content=a(T.content),ba.$tools=a(T.tools),ba.$meta=a(T.meta),ba.$position=a(T.position),ba.$caption=a(T.caption),ba.$controlBox=a(T.controls),ba.$controls=a(T.control),ba.isMobile?(ba.paddingVertical=ba.$close.outerHeight(),ba.paddingHorizontal=0,ba.mobilePaddingVertical=parseInt(ba.$content.css("paddingTop"),10)+parseInt(ba.$content.css("paddingBottom"),10),ba.mobilePaddingHorizontal=parseInt(ba.$content.css("paddingLeft"),10)+parseInt(ba.$content.css("paddingRight"),10)):(ba.paddingVertical=parseInt(ba.$lightbox.css("paddingTop"),10)+parseInt(ba.$lightbox.css("paddingBottom"),10),ba.paddingHorizontal=parseInt(ba.$lightbox.css("paddingLeft"),10)+parseInt(ba.$lightbox.css("paddingRight"),10),ba.mobilePaddingVertical=0,ba.mobilePaddingHorizontal=0),ba.contentHeight=ba.$lightbox.outerHeight()-ba.paddingVertical,ba.contentWidth=ba.$lightbox.outerWidth()-ba.paddingHorizontal,ba.controlHeight=ba.$controls.outerHeight(),m(),ba.gallery.active&&(ba.$lightbox.addClass(U.has_controls),G()),Y.on(V.keyDown,H),Z.on(V.click,[T.overlay,T.close].join(", "),j),ba.gallery.active&&ba.$lightbox.on(V.click,T.control,F),ba.isMobile&&ba.isTouch&&ba.$lightbox.on(V.click,T.caption_toggle,o),ba.$lightbox.fsTransition({property:"opacity"},function(){k?r(g):l?C(g):n?K(g):p?I(g):q&&L(ba.$object)}).addClass(T.raw.open),ba.$overlay.addClass(T.raw.open)}}function i(a){"object"!=typeof a&&(ba.targetHeight=arguments[0],ba.targetWidth=arguments[1]),"element"===ba.type?M(ba.$content.find("> :first-child")):"image"===ba.type?x():"video"===ba.type&&D(),l()}function j(a){W.killEvent(a),ba&&(ba.$lightbox.fsTransition("destroy"),ba.$container.fsTransition("destroy"),s(),ba.$lightbox.addClass(T.raw.animating).fsTransition({property:"opacity"},function(){"undefined"!=typeof ba.$inlineTarget&&ba.$inlineTarget.length&&J(),ba.$lightbox.off(V.namespace),ba.$container.off(V.namespace),Y.off(V.keyDown),Z.off(V.namespace),ba.$overlay.remove(),ba.$lightbox.remove(),ba=null,Y.trigger(V.close)}),ba.$lightbox.removeClass(T.raw.open),ba.$overlay.removeClass(T.raw.open),ba.isMobile&&$.removeClass(U.lock))}function k(){{var a=n();ba.isMobile?0:ba.duration}ba.isMobile||ba.$controls.css({marginTop:(ba.contentHeight-ba.controlHeight-ba.metaHeight)/2}),ba.$lightbox.fsTransition({property:ba.contentHeight!==ba.oldContentHeight?"height":"width"},function(){ba.$container.fsTransition({property:"opacity"},function(){ba.$lightbox.removeClass(T.raw.animating),ba.isAnimating=!1}),ba.$lightbox.removeClass(T.raw.loading),ba.visible=!0,Y.trigger(V.open),ba.gallery.active&&E()}),ba.isMobile||ba.$lightbox.css({height:ba.contentHeight+ba.paddingVertical,width:ba.contentWidth+ba.paddingHorizontal,top:ba.fixed?0:a.top});var b=ba.oldContentHeight!==ba.contentHeight||ba.oldContentWidth!==ba.contentWidth;(ba.isMobile||!b)&&ba.$lightbox.fsTransition("resolve"),ba.oldContentHeight=ba.contentHeight,ba.oldContentWidth=ba.contentWidth,ba.isMobile&&$.addClass(U.lock)}function l(){if(ba.visible&&!ba.isMobile){var a=n();ba.$controls.css({marginTop:(ba.contentHeight-ba.controlHeight-ba.metaHeight)/2}),ba.$lightbox.css({height:ba.contentHeight+ba.paddingVertical,width:ba.contentWidth+ba.paddingHorizontal,top:ba.fixed?0:a.top})}}function m(){var a=n();ba.$lightbox.css({top:ba.fixed?0:a.top})}function n(){if(ba.isMobile)return{left:0,top:0};var a={left:(b.windowWidth-ba.contentWidth-ba.paddingHorizontal)/2,top:ba.top<=0?(b.windowHeight-ba.contentHeight-ba.paddingVertical)/2:ba.top};return ba.fixed!==!0&&(a.top+=Y.scrollTop()),a}function o(a){W.killEvent(a),ba.captionOpen?p():(ba.$lightbox.addClass(T.raw.caption_open).find(T.caption_toggle).text(ba.labels.captionOpen),ba.captionOpen=!0)}function p(){ba.$lightbox.removeClass(T.raw.caption_open).find(T.caption_toggle).text(ba.labels.captionClosed),ba.captionOpen=!1}function q(){var a=this.attr("title"),b=void 0!==a&&a?a.replace(/^\s+|\s+$/g,""):!1;return b?'<p class="caption">'+b+"</p>":""}function r(b){ba.hasScaled=!1,ba.$imageContainer=a('<div class="'+T.raw.image_container+'"><img></div>'),ba.$image=ba.$imageContainer.find("img"),ba.$image.one(V.load,function(){var a=O(ba.$image);ba.naturalHeight=a.naturalHeight,ba.naturalWidth=a.naturalWidth,ba.retina&&(ba.naturalHeight/=2,ba.naturalWidth/=2),ba.$content.prepend(ba.$imageContainer),""===ba.$caption.html()?(ba.$caption.hide(),ba.$lightbox.removeClass(U.has_caption)):(ba.$caption.show(),ba.$lightbox.addClass(U.has_caption)),x(),k(),ba.touch&&(t(),v({scale:1,deltaX:0,deltaY:0}),w(),ba.$container.fsTouch({pan:!0,scale:!0}).on(V.scaleStart,u).on(V.scaleEnd,w).on(V.scale,v))}).error(N).attr("src",b).addClass(T.raw.image),(ba.$image[0].complete||4===ba.$image[0].readyState)&&ba.$image.trigger(V.load)}function s(){ba.$image&&ba.$image.length&&ba.$container.fsTouch("destroy")}function t(){ba.scalePosition=ba.$imageContainer.position(),ba.scaleY=ba.scalePosition.top,ba.scaleX=ba.scalePosition.left,ba.scaleHeight=ba.$image.outerHeight(),ba.scaleWidth=ba.$image.outerWidth()}function u(){t(),ba.$lightbox.removeClass(T.raw.animating)}function v(a){ba.targetContainerY=ba.scaleY+a.deltaY,ba.targetContainerX=ba.scaleX+a.deltaX,ba.targetImageHeight=ba.scaleHeight*a.scale,ba.targetImageWidth=ba.scaleWidth*a.scale,ba.targetImageHeight<ba.scaleMinHeight&&(ba.targetImageHeight=ba.scaleMinHeight),ba.targetImageHeight>ba.scaleMaxHeight&&(ba.targetImageHeight=ba.scaleMaxHeight),ba.targetImageWidth<ba.scaleMinWidth&&(ba.targetImageWidth=ba.scaleMinWidth),ba.targetImageWidth>ba.scaleMaxWidth&&(ba.targetImageWidth=ba.scaleMaxWidth),ba.hasScaled=!0,ba.isScaling=!0,ba.$imageContainer.css({top:ba.targetContainerY,left:ba.targetContainerX}),ba.$image.css({height:ba.targetImageHeight,width:ba.targetImageWidth,top:-(ba.targetImageHeight/2),left:-(ba.targetImageWidth/2)})}function w(){t(),ba.isScaling=!1;var a=ba.$container.outerHeight()-ba.metaHeight,b=ba.$container.outerWidth();ba.scaleMinY=a-ba.scaleHeight/2,ba.scaleMinX=b-ba.scaleWidth/2,ba.scaleMaxY=ba.scaleHeight/2,ba.scaleMaxX=ba.scaleWidth/2,ba.scaleHeight<a?ba.scalePosition.top=a/2:(ba.scalePosition.top<ba.scaleMinY&&(ba.scalePosition.top=ba.scaleMinY),ba.scalePosition.top>ba.scaleMaxY&&(ba.scalePosition.top=ba.scaleMaxY)),ba.scaleWidth<b?ba.scalePosition.left=b/2:(ba.scalePosition.left<ba.scaleMinX&&(ba.scalePosition.left=ba.scaleMinX),ba.scalePosition.left>ba.scaleMaxX&&(ba.scalePosition.left=ba.scaleMaxX)),ba.$lightbox.addClass(T.raw.animating),ba.$imageContainer.css({left:ba.scalePosition.left,top:ba.scalePosition.top})}function x(){if(ba.$image){var a=0;for(ba.windowHeight=ba.viewportHeight=b.windowHeight-ba.mobilePaddingVertical-ba.paddingVertical,ba.windowWidth=ba.viewportWidth=b.windowWidth-ba.mobilePaddingHorizontal-ba.paddingHorizontal,ba.contentHeight=1/0,ba.contentWidth=1/0,ba.imageMarginTop=0,ba.imageMarginLeft=0;ba.contentHeight>ba.viewportHeight&&2>a;)ba.imageHeight=0===a?ba.naturalHeight:ba.$image.outerHeight(),ba.imageWidth=0===a?ba.naturalWidth:ba.$image.outerWidth(),ba.metaHeight=0===a?0:ba.metaHeight,ba.spacerHeight=0===a?0:ba.spacerHeight,0===a&&(ba.ratioHorizontal=ba.imageHeight/ba.imageWidth,ba.ratioVertical=ba.imageWidth/ba.imageHeight,ba.isWide=ba.imageWidth>ba.imageHeight),ba.imageHeight<ba.minHeight&&(ba.minHeight=ba.imageHeight),ba.imageWidth<ba.minWidth&&(ba.minWidth=ba.imageWidth),ba.isMobile?(ba.isTouch?(ba.$controlBox.css({width:b.windowWidth}),ba.spacerHeight=ba.$controls.outerHeight(!0)):(ba.$tools.css({width:b.windowWidth}),ba.spacerHeight=ba.$tools.outerHeight(!0)),ba.contentHeight=ba.viewportHeight,ba.contentWidth=ba.viewportWidth,y(),ba.imageMarginTop=(ba.contentHeight-ba.targetImageHeight-ba.spacerHeight)/2,ba.imageMarginLeft=(ba.contentWidth-ba.targetImageWidth)/2):(0===a&&(ba.viewportHeight-=ba.margin+ba.paddingVertical,ba.viewportWidth-=ba.margin+ba.paddingHorizontal),ba.viewportHeight-=ba.metaHeight,y(),ba.contentHeight=ba.targetImageHeight,ba.contentWidth=ba.targetImageWidth),ba.isMobile||ba.isTouch||ba.$meta.css({width:ba.contentWidth}),ba.hasScaled||(ba.$image.css({height:ba.targetImageHeight,width:ba.targetImageWidth}),ba.$image.css(ba.touch?{top:-(ba.targetImageHeight/2),left:-(ba.targetImageWidth/2)}:{marginTop:ba.imageMarginTop,marginLeft:ba.imageMarginLeft})),ba.isMobile||(ba.metaHeight=ba.$meta.outerHeight(!0),ba.contentHeight+=ba.metaHeight),a++;ba.touch&&(ba.scaleMinHeight=ba.targetImageHeight,ba.scaleMinWidth=ba.targetImageWidth,ba.scaleMaxHeight=ba.naturalHeight,ba.scaleMaxWidth=ba.naturalWidth)}}function y(){var a=ba.isMobile?ba.contentHeight-ba.spacerHeight:ba.viewportHeight,b=ba.isMobile?ba.contentWidth:ba.viewportWidth;ba.isWide?(ba.targetImageWidth=b,ba.targetImageHeight=ba.targetImageWidth*ba.ratioHorizontal,ba.targetImageHeight>a&&(ba.targetImageHeight=a,ba.targetImageWidth=ba.targetImageHeight*ba.ratioVertical)):(ba.targetImageHeight=a,ba.targetImageWidth=ba.targetImageHeight*ba.ratioVertical,ba.targetImageWidth>b&&(ba.targetImageWidth=b,ba.targetImageHeight=ba.targetImageWidth*ba.ratioHorizontal)),(ba.targetImageWidth>ba.imageWidth||ba.targetImageHeight>ba.imageHeight)&&(ba.targetImageHeight=ba.imageHeight,ba.targetImageWidth=ba.imageWidth),(ba.targetImageWidth<ba.minWidth||ba.targetImageHeight<ba.minHeight)&&(ba.targetImageWidth<ba.minWidth?(ba.targetImageWidth=ba.minWidth,ba.targetImageHeight=ba.targetImageWidth*ba.ratioHorizontal):(ba.targetImageHeight=ba.minHeight,ba.targetImageWidth=ba.targetImageHeight*ba.ratioVertical))}function z(a){return"//www.youtube.com/embed/"+a[1]}function A(a){return"//player.vimeo.com/video/"+a[3]}function B(a){return"//www.viddler.com/embed/"+a[7]}function C(b){var c=P(b),d=b.split("?");c?(d.length>=2&&(c+="?"+d.slice(1)[0].trim()),ba.$videoWrapper=a('<div class="'+T.raw.video_wrapper+'"></div>'),ba.$video=a('<iframe class="'+T.raw.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),ba.$video.attr("src",c).addClass(T.raw.video).prependTo(ba.$videoWrapper),ba.$content.prepend(ba.$videoWrapper),D(),k()):N()}function D(){ba.windowHeight=ba.viewportHeight=b.windowHeight-ba.mobilePaddingVertical-ba.paddingVertical,ba.windowWidth=ba.viewportWidth=b.windowWidth-ba.mobilePaddingHorizontal-ba.paddingHorizontal,ba.videoMarginTop=0,ba.videoMarginLeft=0,ba.isMobile?(ba.isTouch?(ba.$controlBox.css({width:b.windowWidth}),ba.spacerHeight=ba.$controls.outerHeight(!0)):(ba.$tools.css({width:b.windowWidth}),ba.spacerHeight=ba.$tools.outerHeight(!0)),ba.viewportHeight-=ba.spacerHeight,ba.targetVideoWidth=ba.viewportWidth,ba.targetVideoHeight=ba.targetVideoWidth*ba.videoRatio,ba.targetVideoHeight>ba.viewportHeight&&(ba.targetVideoHeight=ba.viewportHeight,ba.targetVideoWidth=ba.targetVideoHeight/ba.videoRatio),ba.videoMarginTop=(ba.viewportHeight-ba.targetVideoHeight)/2,ba.videoMarginLeft=(ba.viewportWidth-ba.targetVideoWidth)/2):(ba.viewportHeight=ba.windowHeight-ba.margin,ba.viewportWidth=ba.windowWidth-ba.margin,ba.targetVideoWidth=ba.videoWidth>ba.viewportWidth?ba.viewportWidth:ba.videoWidth,ba.targetVideoWidth<ba.minWidth&&(ba.targetVideoWidth=ba.minWidth),ba.targetVideoHeight=ba.targetVideoWidth*ba.videoRatio,ba.contentHeight=ba.targetVideoHeight,ba.contentWidth=ba.targetVideoWidth),ba.isMobile||ba.isTouch||ba.$meta.css({width:ba.contentWidth}),ba.$videoWrapper.css({height:ba.targetVideoHeight,width:ba.targetVideoWidth,marginTop:ba.videoMarginTop,marginLeft:ba.videoMarginLeft}),ba.isMobile||(ba.metaHeight=ba.$meta.outerHeight(!0),ba.contentHeight=ba.targetVideoHeight+ba.metaHeight)}function E(){var b="";ba.gallery.index>0&&(b=ba.gallery.$items.eq(ba.gallery.index-1).attr("href"),P(b)||a('<img src="'+b+'">')),ba.gallery.index<ba.gallery.total&&(b=ba.gallery.$items.eq(ba.gallery.index+1).attr("href"),P(b)||a('<img src="'+b+'">'))}function F(b){W.killEvent(b);var c=a(b.currentTarget);ba.isAnimating||c.hasClass(T.raw.control_disabled)||(ba.isAnimating=!0,s(),p(),ba.gallery.index+=c.hasClass(T.raw.control_next)?1:-1,ba.gallery.index>ba.gallery.total&&(ba.gallery.index=ba.infinite?0:ba.gallery.total),ba.gallery.index<0&&(ba.gallery.index=ba.infinite?ba.gallery.total:0),ba.$lightbox.addClass(T.raw.animating),ba.$container.fsTransition({property:"opacity"},function(){"undefined"!=typeof ba.$imageContainer&&ba.$imageContainer.remove(),"undefined"!=typeof ba.$videoWrapper&&ba.$videoWrapper.remove(),ba.$el=ba.gallery.$items.eq(ba.gallery.index),ba.$caption.html(ba.formatter.call(ba.$el,ba)),ba.$position.find(T.position_current).html(ba.gallery.index+1);var a=ba.$el.attr("href"),b=P(a);b?(ba.type="video",C(a)):(ba.type="image",r(a)),G()}),ba.$lightbox.addClass(T.raw.loading))}function G(){ba.$controls.removeClass(T.raw.control_disabled),ba.infinite||(0===ba.gallery.index&&ba.$controls.filter(T.control_previous).addClass(U.control_disabled),ba.gallery.index===ba.gallery.total&&ba.$controls.filter(T.control_next).addClass(U.control_disabled))}function H(a){!ba.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&ba.$close.trigger(V.click):(W.killEvent(a),ba.$controls.filter(37===a.keyCode?T.control_previous:T.control_next).trigger(V.click))}function I(b){ba.$inlineTarget=a(b),ba.$inlineContents=ba.$inlineTarget.children().detach(),L(ba.$inlineContents)}function J(){ba.$inlineTarget.append(ba.$inlineContents.detach())}function K(b){b+=b.indexOf("?")>-1?"&"+ba.requestKey+"=true":"?"+ba.requestKey+"=true";var c=a('<iframe class="'+T.raw.iframe+'" src="'+b+'"></iframe>');L(c)}function L(a){ba.$content.append(a),M(a),k()}function M(a){ba.windowHeight=b.windowHeight-ba.mobilePaddingVertical-ba.paddingVertical,ba.windowWidth=b.windowWidth-ba.mobilePaddingHorizontal-ba.paddingHorizontal,ba.objectHeight=a.outerHeight(!0),ba.objectWidth=a.outerWidth(!0),ba.targetHeight=ba.targetHeight||(ba.$el?ba.$el.data(R+"-height"):null),ba.targetWidth=ba.targetWidth||(ba.$el?ba.$el.data(R+"-width"):null),ba.maxHeight=ba.windowHeight<0?ba.minHeight:ba.windowHeight,ba.isIframe=a.is("iframe"),ba.objectMarginTop=0,ba.objectMarginLeft=0,ba.isMobile||(ba.windowHeight-=ba.margin,ba.windowWidth-=ba.margin),ba.contentHeight=ba.targetHeight?ba.targetHeight:ba.isIframe||ba.isMobile?ba.windowHeight:ba.objectHeight,ba.contentWidth=ba.targetWidth?ba.targetWidth:ba.isIframe||ba.isMobile?ba.windowWidth:ba.objectWidth,(ba.isIframe||ba.isObject)&&ba.isMobile?(ba.contentHeight=ba.windowHeight,ba.contentWidth=ba.windowWidth):ba.isObject&&(ba.contentHeight=ba.contentHeight>ba.windowHeight?ba.windowHeight:ba.contentHeight,ba.contentWidth=ba.contentWidth>ba.windowWidth?ba.windowWidth:ba.contentWidth)}function N(){var b=a('<div class="'+T.raw.error+'"><p>Error Loading Resource</p></div>');ba.type="element",ba.$tools.remove(),ba.$image.off(V.namespace),L(b)}function O(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function P(a){for(var b,c=ba.videoFormats,d=0,e=c.length;e>d;d++)if(b=a.match(c[d].pattern),null!==b)return c[d].format.call(ba,b);return!1}var Q=b.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)$/i,fixed:!1,formatter:q,infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption"},margin:50,minHeight:100,minWidth:100,mobile:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",top:0,touch:!0,videoFormats:[{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,format:z},{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:A},{pattern:/^.*((viddler.com\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,format:B}],videoRatio:.5625,videoWidth:800},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","caption_toggle","caption","caption_open","has_controls","has_caption","iframe","error","lock"],events:{open:"open",close:"close"},methods:{_setup:c,_construct:e,_destruct:f,_resize:d,resize:i},utilities:{_initialize:g,close:j}}),R=Q.namespace,S=Q.defaults,T=Q.classes,U=T.raw,V=Q.events,W=Q.functions,X=b.window,Y=b.$window,Z=null,$=null,_=!1,aa=!1,ba=null});