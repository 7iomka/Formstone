/*! formstone v1.2.2 [lightbox.js] 2016-08-11 | GPL-3.0 License | formstone.it */

!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition"],a):a(jQuery,Formstone)}(function(a,b){"use strict";function c(){ga=b.$body,ha=a("html, body"),ia=b.window.location.hash.replace("#","")}function d(){ka&&i()}function e(a){this.on(ca.click,a,h);var b=this.data($+"-gallery");!ja&&ia&&b===ia&&(ja=!0,this.trigger(ca.click))}function f(a){j(),this.off(ca.namespace)}function g(b,c){b instanceof a&&h.apply(ea,[{data:a.extend(!0,{},{$object:b},_,c||{})}])}function h(c){if(!ka){var d=c.data;ka=a.extend({},{visible:!1,gallery:{active:!1},isMobile:b.isMobile||d.mobile,isTouch:b.support.touch,isAnimating:!0,oldContentHeight:0,oldContentWidth:0,metaHeight:0,thumbnailHeight:0,captionOpen:!1,thumbnailsOpen:!1,tapTimer:null},d);var e=d.$el,f=d.$object,g=e&&e[0].href?e[0].href||"":"",h=e&&e[0].hash?e[0].hash||"":"",i=(g.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data($+"-type"):""),k="image"===i||g.match(d.fileTypes)||"data:image"===g.substr(0,10),l=X(g),n="url"===i||!k&&!l&&"http"===g.substr(0,4)&&!h,p="element"===i||!k&&!l&&!n&&"#"===h.substr(0,1),q="undefined"!=typeof f;if(p&&(g=h),!(k||l||n||p||q))return void(ka=null);if(da.killEvent(c),ka.touch=d.touch&&ka.isMobile&&ka.isTouch,ka.$viewportMeta=a('meta[name="viewport"]'),ka.viewportContent=!!ka.$viewportMeta.length&&ka.$viewportMeta.attr("content"),ka.margin*=2,k?ka.type="image":l?ka.type="video":ka.type="element",k||l){var s=e.data($+"-gallery");s&&(ka.gallery.active=!0,ka.gallery.id=s,ka.gallery.$items=a("a[data-lightbox-gallery= "+ka.gallery.id+"], a[rel= "+ka.gallery.id+"]"),ka.gallery.index=ka.gallery.$items.index(ka.$el),ka.gallery.total=ka.gallery.$items.length-1)}ka.thumbnails&&(k||l)&&ka.gallery.active||(ka.thumbnails=!1);var u="";ka.isMobile||(u+='<div class="'+[ba.overlay,ka.theme,ka.customClass].join(" ")+'"></div>');var v=[ba.base,ba.loading,ba.animating,ka.theme,ka.customClass];if(ka.fixed&&v.push(ba.fixed),ka.isMobile&&v.push(ba.mobile),ka.isTouch&&v.push(ba.touch),n&&v.push(ba.iframed),(p||q)&&v.push(ba.inline),ka.thumbnails&&v.push(ba.thumbnailed),u+='<div class="'+v.join(" ")+'" role="dialog" aria-label="lightbox" tabindex="-1">',u+='<button type="button" class="'+ba.close+'">'+ka.labels.close+"</button>",u+='<span class="'+ba.loading_icon+'"></span>',u+='<div class="'+ba.container+'">',ka.gallery.active&&ka.thumbnails){u+='<div class="'+[ba.thumbnails]+'">',u+='<div class="'+[ba.thumbnail_container]+'">';for(var w,x,y=0,z=ka.gallery.$items.length;y<z;y++)w=ka.gallery.$items.eq(y),x=w.data("lightbox-thumbnail"),x||(x=w.find("img").attr("src")),u+='<button class="'+[ba.thumbnail_item]+'">',u+='<img src="'+x+'" alt="">',u+="</button>";u+="</div></div>"}u+='<div class="'+ba.content+'"></div>',(k||l)&&(u+='<div class="'+ba.tools+'">',u+='<div class="'+ba.controls+'">',ka.gallery.active&&(u+='<button type="button" class="'+[ba.control,ba.control_previous].join(" ")+'">'+ka.labels.previous+"</button>",u+='<button type="button" class="'+[ba.control,ba.control_next].join(" ")+'">'+ka.labels.next+"</button>"),ka.isMobile&&ka.isTouch&&(u+='<button type="button" class="'+[ba.toggle,ba.caption_toggle].join(" ")+'">'+ka.labels.captionClosed+"</button>",ka.gallery.active&&ka.thumbnails&&(u+='<button type="button" class="'+[ba.toggle,ba.thumbnail_toggle].join(" ")+'">'+ka.labels.thumbnailsClosed+"</button>")),u+="</div>",u+='<div class="'+ba.meta+'">',u+='<div class="'+ba.meta_content+'">',ka.gallery.active&&(u+='<p class="'+ba.position+'"',ka.gallery.total<1&&(u+=' style="display: none;"'),u+=">",u+='<span class="'+ba.position_current+'">'+(ka.gallery.index+1)+"</span> ",u+=ka.labels.count,u+=' <span class="'+ba.position_total+'">'+(ka.gallery.total+1)+"</span>",u+="</p>"),u+='<div class="'+ba.caption+'">',u+=ka.formatter.call(e,d),u+="</div></div></div>",u+="</div>"),u+="</div></div>",ga.append(u),ka.$overlay=a(aa.overlay),ka.$lightbox=a(aa.base),ka.$close=a(aa.close),ka.$container=a(aa.container),ka.$content=a(aa.content),ka.$tools=a(aa.tools),ka.$meta=a(aa.meta),ka.$metaContent=a(aa.meta_content),ka.$position=a(aa.position),ka.$caption=a(aa.caption),ka.$controlBox=a(aa.controls),ka.$controls=a(aa.control),ka.$thumbnails=a(aa.thumbnails),ka.$thumbnailContainer=a(aa.thumbnail_container),ka.$thumbnailItems=a(aa.thumbnail_item),ka.isMobile?(ka.paddingVertical=ka.$close.outerHeight(),ka.paddingHorizontal=0,ka.mobilePaddingVertical=parseInt(ka.$content.css("paddingTop"),10)+parseInt(ka.$content.css("paddingBottom"),10),ka.mobilePaddingHorizontal=parseInt(ka.$content.css("paddingLeft"),10)+parseInt(ka.$content.css("paddingRight"),10)):(ka.paddingVertical=parseInt(ka.$lightbox.css("paddingTop"),10)+parseInt(ka.$lightbox.css("paddingBottom"),10),ka.paddingHorizontal=parseInt(ka.$lightbox.css("paddingLeft"),10)+parseInt(ka.$lightbox.css("paddingRight"),10),ka.mobilePaddingVertical=0,ka.mobilePaddingHorizontal=0),ka.contentHeight=ka.$lightbox.outerHeight()-ka.paddingVertical,ka.contentWidth=ka.$lightbox.outerWidth()-ka.paddingHorizontal,ka.controlHeight=ka.$controls.outerHeight(),m(),ka.gallery.active&&(ka.$lightbox.addClass(ba.has_controls),O()),fa.on(ca.keyDown,P),ga.on(ca.click,[aa.overlay,aa.close].join(", "),j).on([ca.focus,ca.focusIn].join(" "),Y),ka.gallery.active&&ka.$lightbox.on(ca.click,aa.control,J),ka.thumbnails&&ka.$lightbox.on(ca.click,aa.thumbnail_item,K),ka.isMobile&&ka.isTouch&&ka.$lightbox.on(ca.click,aa.caption_toggle,o).on(ca.click,aa.thumbnail_toggle,r),ka.$lightbox.fsTransition({property:"opacity"},function(){k?t(g):l?G(g):n?S(g):p?Q(g):q&&T(ka.$object)}).addClass(ba.open),ka.$overlay.addClass(ba.open)}}function i(a){"object"!=typeof a&&(ka.targetHeight=arguments[0],ka.targetWidth=arguments[1]),"element"===ka.type?U(ka.$content.find("> :first-child")):"image"===ka.type?C():"video"===ka.type&&H(),l()}function j(a){da.killEvent(a),ka&&(ka.$lightbox.fsTransition("destroy"),ka.$content.fsTransition("destroy"),u(),B(),ka.$lightbox.addClass(ba.animating).fsTransition({property:"opacity"},function(a){"undefined"!=typeof ka.$inlineTarget&&ka.$inlineTarget.length&&R(),ka.$lightbox.off(ca.namespace),ka.$container.off(ca.namespace),fa.off(ca.keyDown),ga.off(ca.namespace),ga.off(ca.namespace),ka.$overlay.remove(),ka.$lightbox.remove(),ka.$el.focus(),ka=null,fa.trigger(ca.close)}),ka.$lightbox.removeClass(ba.open),ka.$overlay.removeClass(ba.open),ka.isMobile&&(ha.removeClass(ba.lock),ka.$viewportMeta?ka.$viewportMeta.attr("content",ka.viewportContent):ka.$viewportMeta.remove()))}function k(){var b=n();ka.isMobile?0:ka.duration;if(ka.isMobile){var c="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no";ka.$viewportMeta?ka.$viewportMeta.attr("content",c):ka.$viewportMeta=a("head").append('<meta name="viewport" content="'+c+'">')}else ka.$controls.css({marginTop:(ka.contentHeight-ka.controlHeight-ka.metaHeight+ka.thumbnailHeight)/2});""===ka.$caption.html()?(ka.$caption.hide(),ka.$lightbox.removeClass(ba.has_caption),ka.gallery.active||ka.$tools.hide()):(ka.$caption.show(),ka.$lightbox.addClass(ba.has_caption)),ka.$lightbox.fsTransition({property:ka.contentHeight!==ka.oldContentHeight?"height":"width"},function(){ka.$content.fsTransition({property:"opacity"},function(){ka.$lightbox.removeClass(ba.animating),ka.isAnimating=!1}),ka.$lightbox.removeClass(ba.loading).addClass(ba.ready),ka.visible=!0,fa.trigger(ca.open),ka.gallery.active&&(I(),L(),M()),ka.$lightbox.focus()}),ka.isMobile||ka.$lightbox.css({height:ka.contentHeight+ka.paddingVertical,width:ka.contentWidth+ka.paddingHorizontal,top:ka.fixed?0:b.top});var d=ka.oldContentHeight!==ka.contentHeight||ka.oldContentWidth!==ka.contentWidth;!ka.isMobile&&d||ka.$lightbox.fsTransition("resolve"),ka.oldContentHeight=ka.contentHeight,ka.oldContentWidth=ka.contentWidth,ka.isMobile&&ha.addClass(ba.lock)}function l(){if(ka.visible&&!ka.isMobile){var a=n();ka.$controls.css({marginTop:(ka.contentHeight-ka.controlHeight-ka.metaHeight+ka.thumbnailHeight)/2}),ka.$lightbox.css({height:ka.contentHeight+ka.paddingVertical,width:ka.contentWidth+ka.paddingHorizontal,top:ka.fixed?0:a.top}),ka.oldContentHeight=ka.contentHeight,ka.oldContentWidth=ka.contentWidth}}function m(){var a=n();ka.$lightbox.css({top:ka.fixed?0:a.top})}function n(){if(ka.isMobile)return{left:0,top:0};var a={left:(b.windowWidth-ka.contentWidth-ka.paddingHorizontal)/2,top:ka.top<=0?(b.windowHeight-ka.contentHeight-ka.paddingVertical)/2:ka.top};return ka.fixed!==!0&&(a.top+=fa.scrollTop()),a}function o(a){if(da.killEvent(a),ka.captionOpen)p();else{s();var b=parseInt(ka.$metaContent.outerHeight(!0));b+=parseInt(ka.$meta.css("padding-top")),b+=parseInt(ka.$meta.css("padding-bottom")),ka.$meta.css({height:b}),ka.$lightbox.addClass(ba.caption_open).find(aa.caption_toggle).text(ka.labels.captionOpen),ka.captionOpen=!0}}function p(){ka.$lightbox.removeClass(ba.caption_open).find(aa.caption_toggle).text(ka.labels.captionClosed),ka.captionOpen=!1}function q(){var a=this.attr("title"),b=!(void 0===a||!a)&&a.replace(/^\s+|\s+$/g,"");return b?'<p class="caption">'+b+"</p>":""}function r(a){da.killEvent(a),ka.thumbnailsOpen?s():(p(),ka.$lightbox.addClass(ba.thumbnails_open).find(aa.thumbnail_toggle).text(ka.labels.thumbnailsOpen),ka.thumbnailsOpen=!0)}function s(){ka.$lightbox.removeClass(ba.thumbnails_open).find(aa.thumbnail_toggle).text(ka.labels.thumbnailsClosed),ka.thumbnailsOpen=!1}function t(b){ka.hasScaled=!1,ka.$imageContainer=a('<div class="'+ba.image_container+'"><img></div>'),ka.$image=ka.$imageContainer.find("img"),ka.$image.one(ca.load,function(){var a=W(ka.$image);if(ka.naturalHeight=a.naturalHeight,ka.naturalWidth=a.naturalWidth,ka.retina&&(ka.naturalHeight/=2,ka.naturalWidth/=2),ka.$content.prepend(ka.$imageContainer),C(),k(),ka.touch){w();var b=ka.$container.outerHeight()-ka.metaHeight,c=ka.$container.outerWidth();ka.$imageContainer.css({left:c/2,top:b/2}),ka.$content.fsTouch({pan:!0,scale:!0}).on(ca.scaleStart,x).on(ca.scaleEnd,z).on(ca.scale,y)}}).error(V).attr("src",b).addClass(ba.image),(ka.$image[0].complete||4===ka.$image[0].readyState)&&ka.$image.trigger(ca.load)}function u(){ka.$image&&ka.$image.length&&ka.$content.fsTouch("destroy").off(ca.scaleStart,x).off(ca.scaleEnd,z).off(ca.scale,y)}function v(){if(ka.$image&&ka.$image.length){ka.isZooming=!0,ka.$lightbox.addClass(ba.zooming).removeClass(ba.scaling);var a=ka.targetImageHeight>ka.scaleMinHeight+1?"out":"in";"out"===a?(ka.targetImageHeight=ka.scaleMinHeight,ka.targetImageWidth=ka.scaleMinWidth):(ka.targetImageHeight=ka.scaleMaxHeight,ka.targetImageWidth=ka.scaleMaxWidth);var b=ka.$container.outerHeight()-ka.metaHeight,c=ka.$container.outerWidth();ka.scalePosition.top=ka.targetContainerY=b/2,ka.scalePosition.left=ka.targetContainerX=c/2,ka.$imageContainer.css({left:ka.targetContainerX,top:ka.targetContainerY}),ka.$image.fsTransition({property:"top"},function(){ka.isZooming=!1,ka.$lightbox.removeClass(ba.zooming)}).css({height:ka.targetImageHeight,width:ka.targetImageWidth,top:-(ka.targetImageHeight/2),left:-(ka.targetImageWidth/2)})}}function w(){ka.scalePosition=ka.$imageContainer.position(),ka.scaleY=ka.scalePosition.top,ka.scaleX=ka.scalePosition.left,ka.scaleHeight=ka.$image.outerHeight(),ka.scaleWidth=ka.$image.outerWidth()}function x(a){ka.isZooming||(ka.$lightbox.removeClass(ba.zooming).addClass(ba.scaling),w(),A())}function y(a){if(!ka.isZooming){B();var b=ka.targetImageHeight>ka.scaleMinHeight+1;ka.targetContainerY=ka.scaleY,ka.targetContainerX=ka.scaleX,b&&(ka.targetContainerY+=a.deltaY,ka.targetContainerX+=a.deltaX),ka.targetImageHeight=ka.scaleHeight*a.scale,ka.targetImageWidth=ka.scaleWidth*a.scale,ka.targetImageHeight<ka.scaleMinHeight&&(ka.targetImageHeight=ka.scaleMinHeight),ka.targetImageHeight>ka.scaleMaxHeight&&(ka.targetImageHeight=ka.scaleMaxHeight),ka.targetImageWidth<ka.scaleMinWidth&&(ka.targetImageWidth=ka.scaleMinWidth),ka.targetImageWidth>ka.scaleMaxWidth&&(ka.targetImageWidth=ka.scaleMaxWidth),ka.hasScaled=!0,ka.$imageContainer.css({top:ka.targetContainerY,left:ka.targetContainerX});var c={height:ka.targetImageHeight,width:ka.targetImageWidth,left:-(ka.targetImageWidth/2)};c.top=-(ka.targetImageHeight/2),ka.$image.css(c)}}function z(a){if(!ka.isZooming){w();var b=ka.$container.outerHeight()-ka.metaHeight,c=ka.$container.outerWidth();ka.scaleMinY=b-ka.scaleHeight/2,ka.scaleMinX=c-ka.scaleWidth/2,ka.scaleMaxY=ka.scaleHeight/2,ka.scaleMaxX=ka.scaleWidth/2,ka.scaleHeight<b?ka.scalePosition.top=b/2:(ka.scalePosition.top<ka.scaleMinY&&(ka.scalePosition.top=ka.scaleMinY),ka.scalePosition.top>ka.scaleMaxY&&(ka.scalePosition.top=ka.scaleMaxY)),ka.scaleWidth<c?ka.scalePosition.left=c/2:(ka.scalePosition.left<ka.scaleMinX&&(ka.scalePosition.left=ka.scaleMinX),ka.scalePosition.left>ka.scaleMaxX&&(ka.scalePosition.left=ka.scaleMaxX)),ka.$lightbox.removeClass(ba.scaling),ka.$imageContainer.css({left:ka.scalePosition.left,top:ka.scalePosition.top})}}function A(){null===ka.tapTimer?ka.tapTimer=da.startTimer(ka.tapTimer,500,function(){B()}):(B(),v())}function B(){da.clearTimer(ka.tapTimer),ka.tapTimer=null}function C(){if(ka.$image){var a=0;for(ka.windowHeight=ka.viewportHeight=b.windowHeight-ka.mobilePaddingVertical-ka.paddingVertical,ka.windowWidth=ka.viewportWidth=b.windowWidth-ka.mobilePaddingHorizontal-ka.paddingHorizontal,ka.contentHeight=1/0,ka.contentWidth=1/0,ka.imageMarginTop=0,ka.imageMarginLeft=0;ka.contentHeight>ka.viewportHeight&&a<2;)ka.imageHeight=0===a?ka.naturalHeight:ka.$image.outerHeight(),ka.imageWidth=0===a?ka.naturalWidth:ka.$image.outerWidth(),ka.metaHeight=0===a?0:ka.metaHeight,ka.spacerHeight=0===a?0:ka.spacerHeight,ka.thumbnailHeight=0===a?0:ka.thumbnailHeight,0===a&&(ka.ratioHorizontal=ka.imageHeight/ka.imageWidth,ka.ratioVertical=ka.imageWidth/ka.imageHeight,ka.isWide=ka.imageWidth>ka.imageHeight),ka.imageHeight<ka.minHeight&&(ka.minHeight=ka.imageHeight),ka.imageWidth<ka.minWidth&&(ka.minWidth=ka.imageWidth),ka.isMobile?(ka.isTouch?(ka.$controlBox.css({width:b.windowWidth}),ka.spacerHeight=ka.$controls.outerHeight(!0)):(ka.$tools.css({width:b.windowWidth}),ka.spacerHeight=ka.$tools.outerHeight(!0)),ka.spacerHeight+=ka.$thumbnails.outerHeight(!0)+10,ka.contentHeight=ka.viewportHeight,ka.contentWidth=ka.viewportWidth,D(),ka.imageMarginTop=(ka.contentHeight-ka.targetImageHeight-ka.spacerHeight)/2,ka.imageMarginLeft=(ka.contentWidth-ka.targetImageWidth)/2):(0===a&&(ka.viewportHeight-=ka.margin+ka.paddingVertical,ka.viewportWidth-=ka.margin+ka.paddingHorizontal),ka.viewportHeight-=ka.metaHeight,ka.thumbnails&&(ka.viewportHeight-=ka.thumbnailHeight),D(),ka.contentHeight=ka.targetImageHeight,ka.contentWidth=ka.targetImageWidth),ka.isMobile||ka.isTouch||ka.$meta.css({width:ka.contentWidth}),ka.hasScaled||(ka.$image.css({height:ka.targetImageHeight,width:ka.targetImageWidth}),ka.touch?ka.$image.css({top:-(ka.targetImageHeight/2),left:-(ka.targetImageWidth/2)}):ka.$image.css({marginTop:ka.imageMarginTop,marginLeft:ka.imageMarginLeft})),ka.isMobile||(ka.metaHeight=ka.$meta.outerHeight(!0),ka.contentHeight+=ka.metaHeight),ka.thumbnails&&(ka.thumbnailHeight=ka.$thumbnails.outerHeight(!0),ka.contentHeight+=ka.thumbnailHeight),a++;ka.touch&&(ka.scaleMinHeight=ka.targetImageHeight,ka.scaleMinWidth=ka.targetImageWidth,ka.scaleMaxHeight=ka.naturalHeight,ka.scaleMaxWidth=ka.naturalWidth)}}function D(){var a=ka.isMobile?ka.contentHeight-ka.spacerHeight:ka.viewportHeight,b=ka.isMobile?ka.contentWidth:ka.viewportWidth;ka.isWide?(ka.targetImageWidth=b,ka.targetImageHeight=ka.targetImageWidth*ka.ratioHorizontal,ka.targetImageHeight>a&&(ka.targetImageHeight=a,ka.targetImageWidth=ka.targetImageHeight*ka.ratioVertical)):(ka.targetImageHeight=a,ka.targetImageWidth=ka.targetImageHeight*ka.ratioVertical,ka.targetImageWidth>b&&(ka.targetImageWidth=b,ka.targetImageHeight=ka.targetImageWidth*ka.ratioHorizontal)),(ka.targetImageWidth>ka.imageWidth||ka.targetImageHeight>ka.imageHeight)&&(ka.targetImageHeight=ka.imageHeight,ka.targetImageWidth=ka.imageWidth),(ka.targetImageWidth<ka.minWidth||ka.targetImageHeight<ka.minHeight)&&(ka.targetImageWidth<ka.minWidth?(ka.targetImageWidth=ka.minWidth,ka.targetImageHeight=ka.targetImageWidth*ka.ratioHorizontal):(ka.targetImageHeight=ka.minHeight,ka.targetImageWidth=ka.targetImageHeight*ka.ratioVertical))}function E(a){return"//www.youtube.com/embed/"+a[1]}function F(a){return"//player.vimeo.com/video/"+a[3]}function G(b){var c=X(b),d=b.split("?");c?(d.length>=2&&(c+="?"+d.slice(1)[0].trim()),ka.$videoWrapper=a('<div class="'+ba.video_wrapper+'"></div>'),ka.$video=a('<iframe class="'+ba.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),ka.$video.attr("src",c).addClass(ba.video).prependTo(ka.$videoWrapper),ka.$content.prepend(ka.$videoWrapper),H(),k()):V()}function H(){ka.windowHeight=ka.viewportHeight=b.windowHeight-ka.mobilePaddingVertical-ka.paddingVertical,ka.windowWidth=ka.viewportWidth=b.windowWidth-ka.mobilePaddingHorizontal-ka.paddingHorizontal,ka.videoMarginTop=0,ka.videoMarginLeft=0,ka.isMobile?(ka.isTouch?(ka.$controlBox.css({width:b.windowWidth}),ka.spacerHeight=ka.$controls.outerHeight(!0)+10):(ka.$tools.css({width:b.windowWidth}),ka.spacerHeight=ka.$tools.outerHeight(!0),ka.spacerHeight+=ka.$thumbnails.outerHeight(!0)+10),ka.viewportHeight-=ka.spacerHeight,ka.targetVideoWidth=ka.viewportWidth,ka.targetVideoHeight=ka.targetVideoWidth*ka.videoRatio,ka.targetVideoHeight>ka.viewportHeight&&(ka.targetVideoHeight=ka.viewportHeight,ka.targetVideoWidth=ka.targetVideoHeight/ka.videoRatio),ka.videoMarginTop=(ka.viewportHeight-ka.targetVideoHeight)/2,ka.videoMarginLeft=(ka.viewportWidth-ka.targetVideoWidth)/2):(ka.viewportHeight=ka.windowHeight-ka.margin,ka.viewportWidth=ka.windowWidth-ka.margin,ka.targetVideoWidth=ka.videoWidth>ka.viewportWidth?ka.viewportWidth:ka.videoWidth,ka.targetVideoWidth<ka.minWidth&&(ka.targetVideoWidth=ka.minWidth),ka.targetVideoHeight=ka.targetVideoWidth*ka.videoRatio,ka.contentHeight=ka.targetVideoHeight,ka.contentWidth=ka.targetVideoWidth),ka.isMobile||ka.isTouch||ka.$meta.css({width:ka.contentWidth}),ka.$videoWrapper.css({height:ka.targetVideoHeight,width:ka.targetVideoWidth,marginTop:ka.videoMarginTop,marginLeft:ka.videoMarginLeft}),ka.isMobile||(ka.metaHeight=ka.$meta.outerHeight(!0),ka.contentHeight+=ka.metaHeight),ka.thumbnails&&(ka.thumbnailHeight=ka.$thumbnails.outerHeight(!0),ka.contentHeight+=ka.thumbnailHeight)}function I(b){var c="";ka.gallery.index>0&&(c=ka.gallery.$items.eq(ka.gallery.index-1).attr("href"),X(c)||a('<img src="'+c+'">')),ka.gallery.index<ka.gallery.total&&(c=ka.gallery.$items.eq(ka.gallery.index+1).attr("href"),X(c)||a('<img src="'+c+'">'))}function J(b){da.killEvent(b);var c=a(b.currentTarget);ka.isAnimating||c.hasClass(ba.control_disabled)||(ka.isAnimating=!0,u(),B(),p(),ka.gallery.index+=c.hasClass(ba.control_next)?1:-1,ka.gallery.index>ka.gallery.total&&(ka.gallery.index=ka.infinite?0:ka.gallery.total),ka.gallery.index<0&&(ka.gallery.index=ka.infinite?ka.gallery.total:0),L(),ka.$lightbox.addClass(ba.animating),ka.$content.fsTransition({property:"opacity"},N),ka.$lightbox.addClass(ba.loading))}function K(b){da.killEvent(b);var c=a(b.currentTarget);ka.isAnimating||c.hasClass(ba.active)||(ka.isAnimating=!0,u(),B(),p(),ka.gallery.index=ka.$thumbnailItems.index(c),L(),ka.$lightbox.addClass(ba.animating),ka.$content.fsTransition({property:"opacity"},N),ka.$lightbox.addClass(ba.loading))}function L(){if(ka.thumbnails){var a=ka.$thumbnailItems.eq(ka.gallery.index);ka.$thumbnailItems.removeClass(ba.active),a.addClass(ba.active)}}function M(){if(ka.thumbnails){var a=ka.$thumbnailItems.eq(ka.gallery.index),b=a.position().left+a.outerWidth(!1)/2-ka.$thumbnailContainer.outerWidth(!0)/2;ka.$thumbnailContainer.stop().animate({scrollLeft:b},200,"linear")}}function N(){"undefined"!=typeof ka.$imageContainer&&ka.$imageContainer.remove(),"undefined"!=typeof ka.$videoWrapper&&ka.$videoWrapper.remove(),ka.$el=ka.gallery.$items.eq(ka.gallery.index),ka.$caption.html(ka.formatter.call(ka.$el,ka)),ka.$position.find(aa.position_current).html(ka.gallery.index+1);var a=ka.$el.attr("href"),b=X(a);b?(ka.type="video",G(a)):(ka.type="image",t(a)),O()}function O(){ka.$controls.removeClass(ba.control_disabled),ka.infinite||(0===ka.gallery.index&&ka.$controls.filter(aa.control_previous).addClass(ba.control_disabled),ka.gallery.index===ka.gallery.total&&ka.$controls.filter(aa.control_next).addClass(ba.control_disabled))}function P(a){!ka.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&ka.$close.trigger(ca.click):(da.killEvent(a),ka.$controls.filter(37===a.keyCode?aa.control_previous:aa.control_next).trigger(ca.click))}function Q(b){ka.$inlineTarget=a(b),ka.$inlineContents=ka.$inlineTarget.children().detach(),T(ka.$inlineContents)}function R(){ka.$inlineTarget.append(ka.$inlineContents.detach())}function S(b){b+=b.indexOf("?")>-1?"&"+ka.requestKey+"=true":"?"+ka.requestKey+"=true";var c=a('<iframe class="'+ba.iframe+'" src="'+b+'"></iframe>');T(c)}function T(a){ka.$content.append(a),U(a),k()}function U(a){ka.windowHeight=b.windowHeight-ka.mobilePaddingVertical-ka.paddingVertical,ka.windowWidth=b.windowWidth-ka.mobilePaddingHorizontal-ka.paddingHorizontal,ka.objectHeight=a.outerHeight(!0),ka.objectWidth=a.outerWidth(!0),ka.targetHeight=ka.targetHeight||(ka.$el?ka.$el.data($+"-height"):null),ka.targetWidth=ka.targetWidth||(ka.$el?ka.$el.data($+"-width"):null),ka.maxHeight=ka.windowHeight<0?ka.minHeight:ka.windowHeight,ka.isIframe=a.is("iframe"),ka.objectMarginTop=0,ka.objectMarginLeft=0,ka.isMobile||(ka.windowHeight-=ka.margin,ka.windowWidth-=ka.margin),ka.contentHeight=ka.targetHeight?ka.targetHeight:ka.isIframe||ka.isMobile?ka.windowHeight:ka.objectHeight,ka.contentWidth=ka.targetWidth?ka.targetWidth:ka.isIframe||ka.isMobile?ka.windowWidth:ka.objectWidth,(ka.isIframe||ka.isObject)&&ka.isMobile?(ka.contentHeight=ka.windowHeight,ka.contentWidth=ka.windowWidth):ka.isObject&&(ka.contentHeight=ka.contentHeight>ka.windowHeight?ka.windowHeight:ka.contentHeight,ka.contentWidth=ka.contentWidth>ka.windowWidth?ka.windowWidth:ka.contentWidth),ka.isMobile||(ka.contentHeight>ka.maxHeight&&(ka.contentHeight=ka.maxHeight),ka.contentWidth>ka.maxWidth&&(ka.contentWidth=ka.maxWidth))}function V(){var b=a('<div class="'+ba.error+'"><p>Error Loading Resource</p></div>');ka.type="element",ka.$tools.remove(),ka.$image.off(ca.namespace),T(b)}function W(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()&&(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width})}function X(a){var b,c=ka.videoFormatter;for(var d in c)if(c.hasOwnProperty(d)&&(b=a.match(c[d].pattern),null!==b))return c[d].format.call(ka,b);return!1}function Y(b){var c=b.target;a.contains(ka.$lightbox[0],c)||c===ka.$lightbox[0]||c===ka.$overlay[0]||(da.killEvent(b),ka.$lightbox.focus())}var Z=b.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)$/i,fixed:!1,formatter:q,infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption",thumbnailsClosed:"View Thumbnails",thumbnailsOpen:"Close Thumbnails"},margin:50,maxHeight:1e4,maxWidth:1e4,minHeight:100,minWidth:100,mobile:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",thumbnails:!1,top:0,touch:!0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:E},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:F}},videoRatio:.5625,videoWidth:800},classes:["loading","animating","scaling","zooming","fixed","mobile","touch","inline","iframed","open","ready","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","meta_content","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","toggle","caption_toggle","caption","caption_open","thumbnailed","thumbnails_open","thumbnail_toggle","thumbnails","thumbnail_container","thumbnail_item","active","has_controls","has_caption","iframe","error","active","lock"],events:{open:"open",close:"close"},methods:{_setup:c,_construct:e,_destruct:f,_resize:d,resize:i},utilities:{_initialize:g,close:j}}),$=Z.namespace,_=Z.defaults,aa=Z.classes,ba=aa.raw,ca=Z.events,da=Z.functions,ea=b.window,fa=b.$window,ga=null,ha=null,ia=!1,ja=!1,ka=null});