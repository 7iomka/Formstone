/*! Formstone v0.0.1 [carousel.js] 2014-12-10 | MIT License | formstone.it */

!function(a,b){"use strict";function c(){w.on(u.resize,d)}function d(){x.length&&(y=v.startTimer(y,z,function(){v.iterate.call(x,j)}))}function e(c){c.useMargin||b.support.transform||(c.useMargin=!0);var d="";if(c.controls&&(d+='<div class="'+t.controls+'">',d+='<button class="'+[t.control,t.control_previous].join(" ")+'">'+c.labels.previous+"</button>",d+='<button class="'+[t.control,t.control_next].join(" ")+'">'+c.labels.next+"</button>",d+="</div>"),c.pagination&&(d+='<div class="'+t.pagination+'">',d+="</div>"),this.addClass([t.base,c.customClass].join(" ")).wrapInner('<div class="'+t.canister+'"></div>').append(d),c.$canister=this.find(s.canister).eq(0),c.$controls=this.find(s.controls).eq(0),c.$pagination=this.find(s.pagination).eq(0),c.$items=c.$canister.children().addClass(t.item),c.$controlItems=c.$controls.find(s.control),c.$paginationItems=c.$pagination.find(s.page),c.$images=c.$canister.find("img"),c.index=0,c.enabled=!1,c.leftPosition=0,c.totalImages=c.$images.length,c.resizeTimer=null,c.autoTimer=null,c.deltaX=null,c.deltaY=null,c.xStart=0,c.yStart=0,c.touchstart=0,c.touchEnd=0,c.maxWidth=1/0===c.maxWidth?"100000px":c.maxWidth,a.mediaquery("bind","(min-width:"+c.minWidth+") and (max-width:"+c.maxWidth+")",{enter:function(){h.call(c.$el,c)},leave:function(){g.call(c.$el,c)}}),c.totalImages>0){c.loadedImages=0;for(var e=0;e<c.totalImages;e++){var f=c.$images.eq(e);f.one(u.load,c,l),(f[0].complete||f[0].height)&&f.trigger(u.load)}}c.autoAdvance&&(c.autoTimer=v.startTimer(c.autoTimer,c.autoTime,function(){m(c)},!0)),x=a(s.base)}function f(b){v.clearTimer(b.autoTimer),b.canister&&b.$items.unwrap(),b.$items.removeClass(t.visible),b.pagination&&b.$pagination.remove(),b.controls&&b.$controls.remove(),this.removeClass([t.base,t.enabled,t.single,b.customClass].join(" ")),x=a(s.base)}function g(a){a.enabled&&(v.clearTimer(a.autoTimer),a.enabled=!1,this.removeClass(t.enabled),a.$canister.attr("style","").css(v.prefix(B,"none")),a.$controls.removeClass(t.visible),a.$pagination.removeClass(t.visible).html(""),a.$canister.css(a.useMargin?{marginLeft:""}:v.prefix(A,"translate3d(0px, 0, 0)")),a.index=0)}function h(a){a.enabled||(a.enabled=!0,this.addClass(t.enabled).on(u.clickTouchStart,s.control,a,n).on(u.clickTouchStart,s.page,a,o),a.$canister.css(v.prefix(B,"")),j.call(this,a))}function i(a,b){a.enabled&&(v.clearTimer(a.autoTimer),p(a,b-1))}function j(a){if(a.enabled){var b,c;if(a.count=a.$items.length,a.count<1)return;for(this.removeClass(t.animated),a.width=this.outerWidth(!1),a.itemWidth=Math.floor(a.width/a.show),a.pageCount=Math.ceil(a.count/a.show),a.$canister.css({width:a.width*a.pageCount}),a.$items.css({width:a.itemWidth}).removeClass(t.visible),a.pages=[],b=0,c=0;b<a.count;b+=a.show)a.pages.push({left:c*a.width,$items:a.$items.slice(b,b+a.show)}),c++;a.width+=a.extraMargin,a.maxMove=-a.pages[a.pages.length-1].left;var d="";for(b=0;b<a.pageCount;b++)d+='<button class="'+t.page+'">'+(b+1)+"</button>";a.$pagination.html(d),a.pageCount<1?(a.$controls.removeClass(t.visible),a.$pagination.removeClass(t.visible)):(a.$controls.addClass(t.visible),a.$pagination.addClass(t.visible)),a.$paginationItems=a.$el.find(s.page),p(a,a.index,!1),setTimeout(function(){a.$el.addClass(t.animated)},5),console.log(a)}}function k(a){a.enabled&&(a.$items=a.$canister.children().addClass(t.item),j.call(this,a))}function l(a){var b=a.data;b.loadedImages++,b.loadedImages===b.totalImages&&j.call(b.$roller,b)}function m(a){var b=a.index+1;b>=a.pageCount&&(b=0),p(a,b)}function n(b){v.killEvent(b);var c=b.data,d=c.index+(a(b.currentTarget).hasClass(t.control_next)?1:-1);v.clearTimer(c.autoTimer),p(c,d)}function o(b){v.killEvent(b);var c=b.data,d=c.$paginationItems.index(a(b.currentTarget));v.clearTimer(c.autoTimer),p(c,d)}function p(a,b,c){0>b&&(b=a.infinite?a.pageCount-1:0),b>=a.pageCount&&(b=a.infinite?0:a.pageCount-1),a.pages[b]&&(a.leftPosition=-a.pages[b].left+a.extraMargin),a.leftPosition<a.maxMove&&(a.leftPosition=a.maxMove),(a.leftPosition>0||isNaN(a.leftPosition))&&(a.leftPosition=0),a.useMargin?a.$canister.css({marginLeft:a.leftPosition}):c===!1?(a.$canister.css(v.prefix(B,"none")).css(v.prefix(A,"translate3d("+a.leftPosition+"px, 0, 0)")),setTimeout(function(){a.$canister.css(v.prefix(B,""))},5)):a.$canister.css(v.prefix(A,"translate3d("+a.leftPosition+"px, 0, 0)")),a.$items.removeClass(t.visible),a.pages[b].$items.addClass(t.visible),c!==!1&&b!==a.index&&(a.infinite||b>-1&&b<a.pageCount)&&a.$el.trigger(u.update,[b]),a.index=b,q(a)}function q(a){a.$paginationItems.filter(s.active).removeClass(t.active),a.$paginationItems.eq(a.index).addClass(t.active),a.infinite?a.$controlItems.addClass(t.enabled):a.pageCount<1?a.$controlItems.removeClass(t.enabled):(a.$controlItems.addClass(t.enabled),a.index<=0?a.$controlItems.filter(s.control_previous).removeClass(t.enabled):(a.index>=a.pageCount||a.leftPosition===a.maxMove)&&a.$controlItems.filter(s.control_next).removeClass(t.enabled))}var r=b.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoTime:8e3,autoWidth:!1,controls:!0,customClass:"",extraMargin:0,infinite:!1,labels:{next:"Next",previous:"Previous"},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,touchPaged:!0,useMargin:!1},classes:["canister","item","controls","control","pagination","page","animated","enabled","visible","active","control_previous","control_next"],events:{update:"update"},methods:{_setup:c,_construct:e,_destruct:f,disable:g,enable:h,jump:i,reset:k,resize:j}}),s=r.classes,t=s.raw,u=r.events,v=r.functions,w=b.$window,x=[],y=null,z=20,A=b.transform,B=b.transition}(jQuery,Formstone);