/*! formstone v0.7.5 [analytics.js] 2015-07-17 | MIT License | formstone.it */

!function(a,b,c){"use strict";function d(){r=b.$body}function e(){o.scrollDepth&&k()}function f(){return arguments.length&&"object"!==a.type(arguments[0])?"destroy"===arguments[0]?h.apply(this):m.apply(this,arguments):g.apply(this,arguments),null}function g(b){!u&&r.length&&(u=!0,A="function"===a.type(p.ga),B="undefined"!==a.type(p.dataLayer)&&"function"===a.type(p.dataLayer.push),o=a.extend(o,b||{}),o.scrollDepth&&(k(),q.on(t.scroll,i)),r.on(t.click,"*["+w+"]",l))}function h(){u&&r.length&&(q.off(t.namespace),r.off(t.namespace))}function i(a){s.startTimer(z,250,j)}function j(){for(var c,d=b.$window.scrollTop()+b.windowHeight,e=0,f=1/x,g=f,h=1;x>=h;h++){if(c=Math.round(100*g).toString(),y[c].passed)e++;else if(d>y[c].edge){y[c].passed=!0;var i=a.mediaquery("state");i.minWidth&&m("ScrollDepth","Depth","MinWidth:"+i.minWidth+"px",c)}g+=f}e>=x&&q.off(t.scroll)}function k(){var a,b=r.outerHeight(),c=1/x,d=c;y={};for(var e=1;x>=e;e++)a=Math.round(100*d).toString(),y[a]={edge:parseInt(b*d),passsed:!1},d+=c}function l(b){if(A||B){b.preventDefault();var c=a(this),d=c.attr("href"),e=c.data(v).split(",");for(var f in e)e.hasOwnProperty(f)&&(e[f]=a.trim(e[f]));m(e[0],e[1],e[2]||d,e[3],e[4],c)}}function m(b,c,d,e,f,g){if("function"===a.type(p.ga)){var h={hitType:"event",location:p.location,title:p.document.title};if(b&&(h.eventCategory=b),c&&(h.eventAction=c),d&&(h.eventLabel=d),e&&(h.eventValue=e),f&&(h.nonInteraction=f),"undefined"!==a.type(g)&&!g.attr("data-analytics-stop")){var i="undefined"!==a.type(g[0].href)?g[0].href:"",j=!i.match(/^mailto\:/i)&&!i.match(/^tel\:/i)&&i.indexOf(":")<0?p.location.protocol+"//"+p.location.hostname+"/"+i:i;""!==i&&(g.attr("target")?p.open(j,g.attr("target")):h.hitCallback=function(){document.location=j})}A?p.ga("send",h):B&&p.dataLayer.push(h)}}var n=b.Plugin("analytics",{methods:{_setup:d,_resize:e},utilities:{_delegate:f}}),o={filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,scrollDepth:!1},p=b.window,q=b.$window,r=null,s=n.functions,t=n.events,u=!1,v="analytics-event",w="data-"+v,x=5,y={},z=null,A=!1,B=!1}(jQuery,Formstone);