/* 
 * Formstone v0.0.1 - 2014-11-08 
 * Library of modular javascript components. 
 * http://formstone.it/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */

!function(a,b){"use strict";function c(a){b.matchMediaSupport&&("object"!=typeof a||n.initialized?q[a]&&q[a].apply(this,Array.prototype.slice.call(arguments,1)):(d.apply(this,arguments),n.initialized=!0))}function d(b){b=b||{};for(var c in w)w.hasOwnProperty(c)&&(o[c]=b[c]?a.merge(b[c],o[c]):o[c]);o=a.extend(o,b),o.minWidth.sort(i),o.maxWidth.sort(h),o.minHeight.sort(i),o.maxHeight.sort(h);for(var d in w)if(w.hasOwnProperty(d)){v[d]={};for(var e in o[d])if(o[d].hasOwnProperty(e)){var g=window.matchMedia("("+w[d]+": "+(1/0===o[d][e]?1e5:o[d][e])+o.unit+")");g.addListener(f),v[d][o[d][e]]=g}}f()}function e(){t={unit:o.unit};for(var a in w)if(w.hasOwnProperty(a))for(var b in v[a])if(v[a].hasOwnProperty(b)&&v[a][b].matches){var c="Infinity"===b?1/0:parseInt(b,10);a.indexOf("max")>-1?(!t[a]||c<t[a])&&(t[a]=c):(!t[a]||c>t[a])&&(t[a]=c)}}function f(){e(),r.trigger(p.snap,[t])}function g(a){var b=j(a.media),c=u[b],d=a.matches?p.enter:p.leave;if(c.active||!c.active&&a.matches){for(var e in c[d])c[d].hasOwnProperty(e)&&c[d][e].apply(c.mq);c.active=!0}}function h(a,b){return b-a}function i(a,b){return a-b}function j(a){return a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")}function k(){return t}function l(a,b){var c=j(a);u[c]||(u[c]={mq:s.matchMedia(a),active:!1,enter:[],leave:[]},u[c].mq.addListener(g));for(var d in b)b.hasOwnProperty(d)&&u[c].hasOwnProperty(d)&&u[c][d].push(b[d]);g(u[c].mq)}function m(a){var b=j(a);u[b]&&(u[b].mq.removeListener(g),u=u.splice(u.indexOf(u[b]),1))}var n=b.Plugin("rubberband",{methods:{_delegate:c}}),o={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},p={snap:"snap",enter:"enter",leave:"leave"},q={state:k,bind:l,unbind:m},r=b.$window,s=r[0],t=null,u=[],v={},w={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);