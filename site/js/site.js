/*! Formstone v0.0.1 [core.js] 2014-12-02 | MIT License | formstone.it */
var Formstone=this.Formstone=function(a,b,c){"use strict";function d(a,b,c,d){var e,f={raw:{}};d=d||{};for(e in d)d.hasOwnProperty(e)&&("classes"===a?(f.raw[d[e]]=b+"-"+d[e],f[d[e]]="."+b+"-"+d[e]):(f.raw[e]=d[e],f[e]=d[e]+"."+b));for(e in c)c.hasOwnProperty(e)&&("classes"===a?(f.raw[e]=c[e].replace(/{ns}/g,b),f[e]=c[e].replace(/{ns}/g,"."+b)):(f.raw[e]=c[e].replace(/.{ns}/g,""),f[e]=c[e].replace(/{ns}/g,b)));return f}function e(){var a,b={transition:"transitionend",MozTransition:"transitionend",OTransition:"otransitionend",WebkitTransition:"webkitTransitionEnd"},d="transitionend",e=["-webkit-transition","transition"],f="",h=c.createElement("div");for(a in b)b.hasOwnProperty(a)&&a in h.style&&(d=b[a],g.support.transition=!0);i.transitionEnd=d+".{ns}";for(a in e)e.hasOwnProperty(a)&&a in h.style&&(f=e[a]);g.transitionProperty=f}var f=function(){this.Plugins={},this.window=b,this.$window=a(b),this.document=c,this.$document=a(c),this.$body=null,this.userAgent=b.navigator.userAgent||b.navigator.vendor||b.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.support={file:!!(b.File&&b.FileList&&b.FileReader),history:!!(b.history&&b.history.pushState&&b.history.replaceState),matchMedia:!(!b.matchMedia&&!b.msMatchMedia),raf:!(!b.requestAnimationFrame||!b.cancelAnimationFrame),touch:!!("ontouchstart"in b||b.DocumentTouch&&c instanceof b.DocumentTouch),transition:!1}},g=new f,h={base:"{ns}",element:"{ns}-element"},i={namespace:".{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",resize:"resize.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};return f.prototype.Plugin=function(e,f){return g.Plugins[e]=function(e,f){function g(b){var c="object"===a.type(b);b=a.extend(!0,{},f.defaults,c?b:{});for(var d=this,g=0,h=d.length;h>g;g++){var i=d.eq(g);if(!l(i)){var j=a.extend(!0,{$el:i},b,i.data(e+"-options"));f.methods._construct.apply(i,[j].concat(Array.prototype.slice.call(arguments,c?1:0))),i.addClass(f.classes.raw.element).data(s,j)}}return d}function j(){o.apply(this,[f.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(f.classes.raw.element).removeData(s)}function k(a){try{a.preventDefault(),a.stopPropagation()}catch(b){}}function l(a){return a.data(s)}function m(a,b,c,d){return n(a),d?setInterval(c,b):setTimeout(c,b)}function n(a,b){a&&(b?clearInterval(a):clearTimeout(a),a=null)}function o(a){for(var b=this,c=0,d=b.length;d>c;c++){var e=b.eq(c),f=l(e)||{};f&&a.apply(e,[f].concat(Array.prototype.slice.call(arguments,1)))}return b}function p(b){if(this instanceof a){var c=f.methods[b];return"object"!==a.type(b)&&b?c&&0!==b.indexOf("_")?o.apply(this,[c].concat(Array.prototype.slice.call(arguments,1))):this:g.apply(this,arguments)}}function q(c){var d=f.utilities[c]||f.utilities._initialize||!1;d&&d.apply(b,Array.prototype.slice.call(arguments,"object"===a.type(c)?0:1))}function r(b){f.defaults=a.extend(!0,f.defaults,b||{})}var s="fs-"+e;return f.initialized=!1,f.classes=d("classes",s,h,f.classes),f.events=d("events",s,i,f.events),f.functions=a.extend({getData:l,startTimer:m,clearTimer:n,killEvent:k,iterate:o},f.functions),f.methods=a.extend(!0,{_setup:a.noop,_construct:a.noop,_destruct:a.noop,destroy:j},f.methods),f.utilities=a.extend(!0,{_initialize:!1,_delegate:!1,defaults:r},f.utilities),f.widget&&(a.fn[e]=p),a[e]=f.utilities._delegate||q,f.namespace=e,a(function(){f.initialized||(f.methods._setup.call(c),f.initialized=!0)}),f}(e,f),g.Plugins[e]},a(function(){g.$body=a("body")}),i.clickTouchStart=i.click+" "+i.touchStart,e(),g}(jQuery,this,document);/*! Formstone v0.0.1 [cookie.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(b,c,h){if("object"===a.type(b))g=a.extend(g,b);else if(h=a.extend({},g,h||{}),"undefined"!==a.type(b)){if("undefined"===a.type(c))return e(b);null===c?f(b):d(b,c,h)}return null}function d(b,c,d){var e=!1,f=new Date;d.expires&&"number"===a.type(d.expires)&&(f.setTime(f.getTime()+d.expires),e=f.toGMTString());var g=d.domain?"; domain="+d.domain:"",i=e?"; expires="+e:"",j=e?"; max-age="+d.expires/1e3:"",k=d.path?"; path="+d.path:"",l=d.secure?"; secure":"";h.cookie=b+"="+c+i+j+g+k+l}function e(a){for(var b=a+"=",c=h.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null}function f(a){d(a,"",{expires:-6048e5})}var g=(b.Plugin("cookie",{utilities:{_delegate:c}}),{domain:null,expires:6048e5,path:null,secure:null}),h=b.document}(jQuery,Formstone),/*! Formstone v0.0.1 [dropdown.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(c){c.multiple=this.prop("multiple"),c.disabled=this.is(":disabled"),c.external&&(c.links=!0);var d=this.find("[selected]").not(":disabled"),e=this.find("option").index(d);c.multiple||""===c.label?c.label="":(this.prepend('<option value="" class="'+z.item_placeholder+'" selected>'+c.label+"</option>"),e>-1&&e++);var f=this.find("option, optgroup"),g=f.filter("option");d.length||(d=g.eq(0));var j=e>-1?e:0,k=""!==c.label?c.label:d.text();c.tabIndex=this[0].tabIndex,this[0].tabIndex=-1;var l=[z.base,z.customClass];b.isMobile?l.push(z.mobile):c.cover&&l.push(z.cover),c.multiple&&l.push(z.multiple),c.disabled&&l.push(z.disabled);var q='<div class="'+l.join(" ")+'" tabindex="'+c.tabIndex+'"></div>',s="";c.multiple||(s+='<span class="'+z.selected+'">',s+=a("<span></span>").text(v(k,c.trim)).html(),s+="</span>"),s+='<div class="'+z.options+'">',s+="</div>",this.wrap(q).after(s),c.$dropdown=this.parent(y.base),c.$allOptions=f,c.$options=g,c.$selected=c.$dropdown.find(y.selected),c.$wrapper=c.$dropdown.find(y.options),c.index=-1,c.guid=C++,c.closed=!0,c.clickGUID=A.click+c.guid,c.keyDownGUID=A.keyDown+c.guid,h(c),c.multiple||r(j,c),c.$dropdown.touch({tap:!0}).on([A.tap,A.click].join(" "),y.selected,c,i).on([A.tap,A.click].join(" "),y.item,c,m),this.on(A.change,c,n),b.isMobile||(c.$dropdown.on(A.focusIn,c,o).on(A.blur,c,p),this.on(A.focusIn,c,function(a){a.data.$dropdown.trigger("focus")}))}function d(a){a.$dropdown.hasClass(z.open)&&a.$selected.trigger(A.click),a.$el[0].tabIndex=a.tabIndex,a.$placeholder.remove(),a.$selected.remove(),a.$wrapper.remove(),a.$dropdown.off(A.namespace),a.$el.off(A.namespace).show().unwrap()}function e(a,b){if("undefined"!=typeof b){var c=a.$items.index(a.$items.filter("[data-value="+b+"]"));a.$items.eq(c).addClass(z.item_disabled),a.$options.eq(c).prop("disabled",!0)}else a.$dropdown.hasClass(z.open)&&a.$selected.trigger(A.click),a.$dropdown.addClass(z.disabled),a.$el.prop("disabled",!0),a.disabled=!0}function f(a,b){if("undefined"!=typeof b){var c=a.$items.index(a.$items.filter("[data-value="+b+"]"));a.$items.eq(c).removeClass(z.item_disabled),a.$options.eq(c).prop("disabled",!1)}else a.$dropdown.removeClass(z.disabled),a.$el.prop("disabled",!1),a.disabled=!1}function g(a){var b=a.index;a.$allOptions=a.$el.find("option, optgroup"),a.$options=a.$allOptions.filter("option"),a.index=-1,b=a.$options.index(a.$options.filter(":selected")),h(a),a.multiple||r(b,a)}function h(b){for(var c="",d=b.links?"a":"span",e=0,f=0,g=b.$allOptions.length;g>f;f++){var h=b.$allOptions.eq(f),i=[];if("OPTGROUP"===h[0].tagName)i.push(z.group),h.is(":disabled")&&i.push(z.disabled),c+='<span class="'+i.join(" ")+'">'+h.attr("label")+"</span>";else{var j=h.val();h.attr("value")||h.attr("value",j),i.push(z.item),h.hasClass(z.placeholder)&&i.push(z.item_placeholder),h.is(":selected")&&i.push(z.item_selected),h.is(":disabled")&&i.push(z.item_disabled),c+="<"+d+' class="'+i.join(" ")+'" ',c+=b.links?'href="'+j+'"':'data-value="'+j+'"',c+=">"+a("<span></span>").text(v(h.text(),b.trim)).html()+"</"+d+">",e++}}b.$items=b.$wrapper.html(c).find(y.item)}function i(a){B.killEvent(a);var c=a.data;if(!c.disabled)if(c.mobile||!b.isMobile||b.isFirefoxMobile)c.closed?j(c):l(c);else{var d=c.$el[0];if(E.createEvent){var e=E.createEvent("MouseEvents");e.initMouseEvent("mousedown",!1,!0,D,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(e)}else d.fireEvent&&d.fireEvent("onmousedown")}}function j(a){if(a.closed){var b=a.$dropdown.offset(),c=F.outerHeight(),d=a.$wrapper.outerHeight(!0);a.index>=0?a.$items.eq(a.index).position():{left:0,top:0},b.top+d>c&&a.$dropdown.addClass(z.bottom),a.$dropdown.addClass(z.open),F.on(a.clickGUID,":not("+y.base+")",a,k),s(a),a.closed=!1}}function k(b){B.killEvent(b),0===a(b.currentTarget).parents(y.base).length&&l(b.data)}function l(a){a&&!a.closed&&(a.$dropdown.removeClass([z.open,z.bottom].join(" ")),F.off(a.clickGUID),a.closed=!0)}function m(b){B.killEvent(b);var c=a(this),d=b.data;if(!d.disabled){if(d.$wrapper.is(":visible")){var e=d.$items.index(c);e!==d.index&&(r(e,d),t(d))}d.multiple||l(d)}}function n(b,c){var d=a(this),e=b.data;if(!c&&!e.multiple){var f=e.$options.index(e.$options.filter("[value='"+w(d.val())+"']"));r(f,e),t(e)}}function o(a){B.killEvent(a);var b=a.data;b.disabled||b.multiple||b.$dropdown.addClass(z.focus).on(b.keyDownGUID,b,q)}function p(a){B.killEvent(a);var b=a.data;b.$dropdown.removeClass(z.focus).off(b.keyDownGUID),b.multiple||l(b)}function q(c){var d=c.data;if(13===c.keyCode)d.closed||(l(d),r(d.index,d)),t(d);else if(!(9===c.keyCode||c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)){B.killEvent(c);var e=d.$items.length-1,f=d.index<0?0:d.index;if(a.inArray(c.keyCode,b.isFirefox?[38,40,37,39]:[38,40])>-1)f+=38===c.keyCode||b.isFirefox&&37===c.keyCode?-1:1,0>f&&(f=0),f>e&&(f=e);else{var g,h,i=String.fromCharCode(c.keyCode).toUpperCase();for(h=d.index+1;e>=h;h++)if(g=d.$options.eq(h).text().charAt(0).toUpperCase(),g===i){f=h;break}if(0>f||f===d.index)for(h=0;e>=h;h++)if(g=d.$options.eq(h).text().charAt(0).toUpperCase(),g===i){f=h;break}}f>=0&&(r(f,d),s(d))}}function r(a,b){var c=b.$items.eq(a),d=b.$options.eq(a),e=c.hasClass(z.item_selected),f=c.hasClass(z.item_disabled);if(!f)if(b.multiple)e?(d.prop("selected",null),c.removeClass(z.item_selected)):(d.prop("selected",!0),c.addClass(z.item_selected));else if(a>-1&&a<b.$items.length){var g=c.html();c.data("value"),b.$selected.html(g).removeClass(y.item_placeholder),b.$items.filter(y.item_selected).removeClass(z.item_selected),b.$el[0].selectedIndex=a,c.addClass(z.item_selected),b.index=a}else""!==b.label&&b.$selected.html(b.label)}function s(a){var b=a.$items.eq(a.index),c=a.index>=0&&!b.hasClass(y.item_placeholder)?b.position():{left:0,top:0};a.$wrapper.scrollTop(a.$wrapper.scrollTop()+c.top)}function t(a){a.links?u(a):a.$el.trigger(A.raw.change,[!0])}function u(a){var b=a.$el.val();a.external?D.open(b):D.location.href=b}function v(a,b){return 0===b?a:a.length>b?a.substring(0,b)+"...":a}function w(a){return"string"==typeof a?a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):a}var x=b.Plugin("dropdown",{widget:!0,defaults:{cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},methods:{_construct:c,_destruct:d,disable:e,enable:f,update:g,open:j,close:l},classes:["cover","bottom","multiple","mobile","open","disabled","focus","selected","options","group","item","item_disabled","item_selected","item_placeholder"],events:{tap:"tap"}}),y=x.classes,z=y.raw,A=x.events,B=x.functions,C=0,D=b.window,E=(b.$window,b.document),F=null;a(function(){F=b.$body})}(jQuery,Formstone),/*! Formstone v0.0.1 [lightbox.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b,c){"use strict";function d(a){a.formatter=n,this.on(L.click,a,g)}function e(){i(),this.off(L.namespace)}function f(b,c){b instanceof a&&g.apply(N,[{data:a.extend({},{$object:b},I,c||{})}])}function g(c){if(!Q){var d=c.data,e=d.$el,f=d.$object,g=e&&e[0].href?e[0].href||"":"",j=e&&e[0].hash?e[0].hash||"":"",k=g.toLowerCase().split(".").pop().split(/\#|\?/),m=k[0],n=e?e.data(J.raw.namespace+"-type"):"",p="image"===n||a.inArray(m,d.extensions)>-1||"data:image"===g.substr(0,10),q=g.indexOf("youtube.com/embed")>-1||g.indexOf("player.vimeo.com/video")>-1,s="url"===n||!p&&!q&&"http"===g.substr(0,4)&&!j,t="element"===n||!p&&!q&&!s&&"#"===j.substr(0,1),A="undefined"!=typeof f;if(t&&(g=j),!(p||q||s||t||A))return;if(M.killEvent(c),Q=a.extend({},{visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:b.isMobile||d.mobile,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},d),Q.margin*=2,Q.type=p?"image":q?"video":"element",p||q){var B=e.data("gallery");B&&(Q.gallery.active=!0,Q.gallery.id=B,Q.gallery.$items=a("a[data-gallery= "+Q.gallery.id+"], a[rel= "+Q.gallery.id+"]"),Q.gallery.index=Q.gallery.$items.index(Q.$el),Q.gallery.total=Q.gallery.$items.length-1)}var C="";Q.isMobile||(C+='<div class="'+[J.raw.overlay,Q.customClass].join(" ")+'"></div>');var D=[J.raw.base,J.raw.loading,J.raw.animating,Q.customClass];Q.fixed&&D.push(J.raw.fixed),Q.isMobile&&D.push(J.raw.mobile),s&&D.push(J.raw.iframed),(t||A)&&D.push(J.raw.inline),C+='<div class="'+D.join(" ")+'">',C+='<span class="'+J.raw.close+'">'+Q.labels.close+"</span>",C+='<span class="'+J.raw.loading_icon+'"></span>',C+='<div class="'+J.raw.container+'">',C+='<div class="'+J.raw.content+'">',(p||q)&&(C+='<div class="'+J.raw.meta+'">',Q.gallery.active&&(C+='<div class="'+[J.raw.control,J.raw.control_previous].join(" ")+'">'+Q.labels.previous+"</div>",C+='<div class="'+[J.raw.control,J.raw.control_next].join(" ")+'">'+Q.labels.next+"</div>",C+='<p class="'+J.raw.position+'"',Q.gallery.total<1&&(C+=' style="display: none;"'),C+=">",C+='<span class="'+J.raw.position_current+'">'+(Q.gallery.index+1)+"</span> ",C+=Q.labels.count,C+=' <span class="'+J.raw.position_total+'">'+(Q.gallery.total+1)+"</span>",C+="</p>"),C+='<div class="'+J.raw.caption+'">',C+=Q.formatter.call(e,d),C+="</div></div>"),C+="</div></div></div>",P.append(C),Q.$overlay=a(J.overlay),Q.$lightbox=a(J.base),Q.$close=a(J.close),Q.$container=a(J.container),Q.$content=a(J.content),Q.$meta=a(J.meta),Q.$position=a(J.position),Q.$caption=a(J.caption),Q.$controls=a(J.control),Q.paddingVertical=Q.isMobile?Q.$close.outerHeight()/2:parseInt(Q.$lightbox.css("paddingTop"),10)+parseInt(Q.$lightbox.css("paddingBottom"),10),Q.paddingHorizontal=Q.isMobile?0:parseInt(Q.$lightbox.css("paddingLeft"),10)+parseInt(Q.$lightbox.css("paddingRight"),10),Q.contentHeight=Q.$lightbox.outerHeight()-Q.paddingVertical,Q.contentWidth=Q.$lightbox.outerWidth()-Q.paddingHorizontal,Q.controlHeight=Q.$controls.outerHeight(),l(),Q.gallery.active&&v(),O.on(L.resize,h).on(L.keyDown,w),P.on(L.clickTouchStart,[J.overlay,J.close].join(", "),i).on(L.touchMove,M.killEvent),Q.gallery.active&&Q.$lightbox.on(L.clickTouchStart,J.control,u),Q.$lightbox.transition({property:"opacity"},function(){p?o(g):q?r(g):s?y(g):t?x(g):A&&z(Q.$object)}),P.addClass(J.raw.open)}}function h(a){"object"!=typeof a&&(Q.targetHeight=arguments[0],Q.targetWidth=arguments[1]),"element"===Q.type?A(Q.$content.find("> :first-child")):"image"===Q.type?p():"video"===Q.type&&s(),k()}function i(a){M.killEvent(a),Q&&(Q.$lightbox.transition({property:"opacity"},function(){Q.$lightbox.off(L.namespace),Q.$container.off(L.namespace),O.off(L.namespace),P.off(L.namespace),Q.$overlay.remove(),Q.$lightbox.remove(),Q=null,O.trigger(L.close)}).addClass(J.raw.animating),P.removeClass(J.raw.open),M.clearTimer(Q.resizeTimer))}function j(){var a=m();Q.isMobile?0:Q.duration,Q.isMobile||Q.$controls.css({marginTop:(Q.contentHeight-Q.controlHeight-Q.metaHeight)/2}),!Q.visible&&Q.isMobile&&Q.gallery.active&&Q.$content.on(L.touchStart,J.image,C),(Q.isMobile||Q.fixed)&&P.addClass(J.raw.open),Q.$lightbox.transition({property:"height"},function(){Q.$container.transition({property:"opacity"},function(){Q.$lightbox.removeClass(J.raw.animating),Q.isAnimating=!1}),Q.$lightbox.removeClass(J.raw.loading),Q.visible=!0,O.trigger(L.open),Q.gallery.active&&t()}),Q.isMobile||Q.$lightbox.css({height:Q.contentHeight+Q.paddingVertical,width:Q.contentWidth+Q.paddingHorizontal,top:Q.fixed?0:a.top});var b=Q.oldContentHeight!==Q.contentHeight||Q.oldContentWidth!==Q.contentWidth;(Q.isMobile||!b)&&Q.$lightbox.transition("resolve"),Q.oldContentHeight=Q.contentHeight,Q.oldContentWidth=Q.contentWidth}function k(){if(Q.visible&&!Q.isMobile){var a=m();Q.$controls.css({marginTop:(Q.contentHeight-Q.controlHeight-Q.metaHeight)/2}),Q.$lightbox.css({height:Q.contentHeight+Q.paddingVertical,width:Q.contentWidth+Q.paddingHorizontal,top:Q.fixed?0:a.top})}}function l(){var a=m();Q.$lightbox.css({top:Q.fixed?0:a.top})}function m(){if(Q.isMobile)return{left:0,top:0};var a={left:(O.width()-Q.contentWidth-Q.paddingHorizontal)/2,top:Q.top<=0?(O.height()-Q.contentHeight-Q.paddingVertical)/2:Q.top};return Q.fixed!==!0&&(a.top+=O.scrollTop()),a}function n(){var a=this.attr("title");return a!==c&&""!==a.trim()?'<p class="caption">'+a.trim()+"</p>":""}function o(b){Q.$image=a("<img>"),Q.$image.one(L.load,function(){var a=F(Q.$image);Q.naturalHeight=a.naturalHeight,Q.naturalWidth=a.naturalWidth,Q.retina&&(Q.naturalHeight/=2,Q.naturalWidth/=2),Q.$content.prepend(Q.$image),""===Q.$caption.html()?Q.$caption.hide():Q.$caption.show(),p(),j()}).error(B).attr("src",b).addClass(J.raw.image),(Q.$image[0].complete||4===Q.$image[0].readyState)&&Q.$image.trigger(L.load)}function p(){var a=0;for(Q.windowHeight=Q.viewportHeight=O.height()-Q.paddingVertical,Q.windowWidth=Q.viewportWidth=O.width()-Q.paddingHorizontal,Q.contentHeight=1/0,Q.contentWidth=1/0,Q.imageMarginTop=0,Q.imageMarginLeft=0;Q.contentHeight>Q.viewportHeight&&2>a;)Q.imageHeight=0===a?Q.naturalHeight:Q.$image.outerHeight(),Q.imageWidth=0===a?Q.naturalWidth:Q.$image.outerWidth(),Q.metaHeight=0===a?0:Q.metaHeight,0===a&&(Q.ratioHorizontal=Q.imageHeight/Q.imageWidth,Q.ratioVertical=Q.imageWidth/Q.imageHeight,Q.isWide=Q.imageWidth>Q.imageHeight),Q.imageHeight<Q.minHeight&&(Q.minHeight=Q.imageHeight),Q.imageWidth<Q.minWidth&&(Q.minWidth=Q.imageWidth),Q.isMobile?(Q.$meta.css({width:Q.windowWidth}),Q.metaHeight=Q.$meta.outerHeight(!0),Q.contentHeight=Q.viewportHeight-Q.paddingVertical,Q.contentWidth=Q.viewportWidth-Q.paddingHorizontal,q(),Q.imageMarginTop=(Q.contentHeight-Q.targetImageHeight-Q.metaHeight)/2,Q.imageMarginLeft=(Q.contentWidth-Q.targetImageWidth)/2):(0===a&&(Q.viewportHeight-=Q.margin+Q.paddingVertical,Q.viewportWidth-=Q.margin+Q.paddingHorizontal),Q.viewportHeight-=Q.metaHeight,q(),Q.contentHeight=Q.targetImageHeight,Q.contentWidth=Q.targetImageWidth),Q.$meta.css({width:Q.contentWidth}),Q.$image.css({height:Q.targetImageHeight,width:Q.targetImageWidth,marginTop:Q.imageMarginTop,marginLeft:Q.imageMarginLeft}),Q.isMobile||(Q.metaHeight=Q.$meta.outerHeight(!0),Q.contentHeight+=Q.metaHeight),a++}function q(){var a=Q.isMobile?Q.contentHeight-Q.metaHeight:Q.viewportHeight,b=Q.isMobile?Q.contentWidth:Q.viewportWidth;Q.isWide?(Q.targetImageWidth=b,Q.targetImageHeight=Q.targetImageWidth*Q.ratioHorizontal,Q.targetImageHeight>a&&(Q.targetImageHeight=a,Q.targetImageWidth=Q.targetImageHeight*Q.ratioVertical)):(Q.targetImageHeight=a,Q.targetImageWidth=Q.targetImageHeight*Q.ratioVertical,Q.targetImageWidth>b&&(Q.targetImageWidth=b,Q.targetImageHeight=Q.targetImageWidth*Q.ratioHorizontal)),(Q.targetImageWidth>Q.imageWidth||Q.targetImageHeight>Q.imageHeight)&&(Q.targetImageHeight=Q.imageHeight,Q.targetImageWidth=Q.imageWidth),(Q.targetImageWidth<Q.minWidth||Q.targetImageHeight<Q.minHeight)&&(Q.targetImageWidth<Q.minWidth?(Q.targetImageWidth=Q.minWidth,Q.targetImageHeight=Q.targetImageWidth*Q.ratioHorizontal):(Q.targetImageHeight=Q.minHeight,Q.targetImageWidth=Q.targetImageHeight*Q.ratioVertical))}function r(b){Q.$videoWrapper=a('<div class="'+J.raw.videoWrapper+'"></div>'),Q.$video=a('<iframe class="'+J.raw.video+'" seamless="seamless"></iframe>'),Q.$video.attr("src",b).addClass(J.raw.video).prependTo(Q.$videoWrapper),Q.$content.prepend(Q.$videoWrapper),s(),j()}function s(){Q.windowHeight=Q.viewportHeight=Q.contentHeight=O.height()-Q.paddingVertical,Q.windowWidth=Q.viewportWidth=Q.contentWidth=O.width()-Q.paddingHorizontal,Q.videoMarginTop=0,Q.videoMarginLeft=0,Q.isMobile?(Q.$meta.css({width:Q.windowWidth}),Q.metaHeight=Q.$meta.outerHeight(!0),Q.viewportHeight-=Q.metaHeight,Q.targetVideoWidth=Q.viewportWidth,Q.targetVideoHeight=Q.targetVideoWidth*Q.videoRatio,Q.targetVideoHeight>Q.viewportHeight&&(Q.targetVideoHeight=Q.viewportHeight,Q.targetVideoWidth=Q.targetVideoHeight/Q.videoRatio),Q.videoMarginTop=(Q.viewportHeight-Q.targetVideoHeight)/2,Q.videoMarginLeft=(Q.viewportWidth-Q.targetVideoWidth)/2):(Q.viewportHeight=Q.windowHeight-Q.margin,Q.viewportWidth=Q.windowWidth-Q.margin,Q.targetVideoWidth=Q.videoWidth>Q.viewportWidth?Q.viewportWidth:Q.videoWidth,Q.targetVideoWidth<Q.minWidth&&(Q.targetVideoWidth=Q.minWidth),Q.targetVideoHeight=Q.targetVideoWidth*Q.videoRatio,Q.contentHeight=Q.targetVideoHeight,Q.contentWidth=Q.targetVideoWidth),Q.$meta.css({width:Q.contentWidth}),Q.$videoWrapper.css({height:Q.targetVideoHeight,width:Q.targetVideoWidth,marginTop:Q.videoMarginTop,marginLeft:Q.videoMarginLeft}),Q.isMobile||(Q.metaHeight=Q.$meta.outerHeight(!0),Q.contentHeight=Q.targetVideoHeight+Q.metaHeight)}function t(){var b="";Q.gallery.index>0&&(b=Q.gallery.$items.eq(Q.gallery.index-1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">')),Q.gallery.index<Q.gallery.total&&(b=Q.gallery.$items.eq(Q.gallery.index+1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">'))}function u(b){M.killEvent(b);var c=a(b.currentTarget);Q.isAnimating||c.hasClass(J.raw.control_disabled)||(Q.isAnimating=!0,Q.gallery.index+=c.hasClass(J.raw.control_next)?1:-1,Q.gallery.index>Q.gallery.total&&(Q.gallery.index=Q.gallery.total),Q.gallery.index<0&&(Q.gallery.index=0),Q.$lightbox.addClass([J.raw.loading,J.raw.animating].join(" ")),Q.$container.transition({property:"opacity"},function(){"undefined"!=typeof Q.$image&&Q.$image.remove(),"undefined"!=typeof Q.$videoWrapper&&Q.$videoWrapper.remove(),Q.$el=Q.gallery.$items.eq(Q.gallery.index),Q.$caption.html(Q.formatter.call(Q.$el,Q)),Q.$position.find(J.position_current).html(Q.gallery.index+1);var a=Q.$el.attr("href"),b=a.indexOf("youtube.com/embed")>-1||a.indexOf("player.vimeo.com/video")>-1;b?r(a):o(a),v()}))}function v(){Q.$controls.removeClass(J.raw.control_disabled),0===Q.gallery.index&&Q.$controls.filter(J.control_previous).addClass(K.control_disabled),Q.gallery.index===Q.gallery.total&&Q.$controls.filter(J.control_next).addClass(K.control_disabled)}function w(a){!Q.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&Q.$close.trigger(L.click):(M.killEvent(a),Q.$controls.filter(37===a.keyCode?J.control_previous:J.control_next).trigger(L.click))}function x(b){var c=a(b).find("> :first-child").clone();z(c)}function y(b){b+=b.indexOf("?")>-1?"&"+Q.requestKey+"=true":"?"+Q.requestKey+"=true";var c=a('<iframe class="'+J.raw.iframe+'" src="'+b+'"></iframe>');z(c)}function z(a){Q.$content.append(a),A(a),j()}function A(a){Q.windowHeight=O.height()-Q.paddingVertical,Q.windowWidth=O.width()-Q.paddingHorizontal,Q.objectHeight=a.outerHeight(!0),Q.objectWidth=a.outerWidth(!0),Q.targetHeight=Q.targetHeight||(Q.$el?Q.$el.data(H+"-height"):null),Q.targetWidth=Q.targetWidth||(Q.$el?Q.$el.data(H+"-width"):null),Q.maxHeight=Q.windowHeight<0?Q.minHeight:Q.windowHeight,Q.isIframe=a.is("iframe"),Q.objectMarginTop=0,Q.objectMarginLeft=0,Q.isMobile||(Q.windowHeight-=Q.margin,Q.windowWidth-=Q.margin),Q.contentHeight=Q.targetHeight?Q.targetHeight:Q.isIframe||Q.isMobile?Q.windowHeight:Q.objectHeight,Q.contentWidth=Q.targetWidth?Q.targetWidth:Q.isIframe||Q.isMobile?Q.windowWidth:Q.objectWidth,(Q.isIframe||Q.isObject)&&Q.isMobile?(Q.contentHeight=Q.windowHeight,Q.contentWidth=Q.windowWidth):Q.isObject&&(Q.contentHeight=Q.contentHeight>Q.windowHeight?Q.windowHeight:Q.contentHeight,Q.contentWidth=Q.contentWidth>Q.windowWidth?Q.windowWidth:Q.contentWidth)}function B(){var b=a('<div class="'+J.raw.error+'"><p>Error Loading Resource</p></div>');Q.type="element",Q.$meta.remove(),Q.$image.off(L.namespace),z(b)}function C(a){if(M.killEvent(a),M.clearTimer(Q.touchTimer),!Q.isAnimating){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;Q.xStart=b?b.pageX:a.clientX,Q.leftPosition=0,Q.touchMax=1/0,Q.touchMin=-1/0,Q.edge=.25*Q.contentWidth,0===Q.gallery.index&&(Q.touchMax=0),Q.gallery.index===Q.gallery.total&&(Q.touchMin=0),Q.$lightbox.on(L.touchMove,D).one(L.touchEnd,E)}}function D(a){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;Q.delta=Q.xStart-(b?b.pageX:a.clientX),Q.delta>20&&M.killEvent(a),Q.canSwipe=!0;var c=-Q.delta;c<Q.touchMin&&(c=Q.touchMin,Q.canSwipe=!1),c>Q.touchMax&&(c=Q.touchMax,Q.canSwipe=!1),Q.$image.css({transform:"translate3D("+c+"px,0,0)"}),Q.touchTimer=M.startTimer(Q.touchTimer,300,function(){E(a)})}function E(a){M.killEvent(a),M.clearTimer(Q.touchTimer),Q.$lightbox.off([L.touchMove,L.touchEnd].join("")),Q.delta&&(Q.$lightbox.addClass(J.raw.animating),Q.swipe=!1,Q.canSwipe&&(Q.delta>Q.edge||Q.delta<-Q.edge)?(Q.swipe=!0,Q.$image.css(Q.delta<=Q.leftPosition?{transform:"translate3D("+Q.contentWidth+"px,0,0)"}:{transform:"translate3D("+-Q.contentWidth+"px,0,0)"})):Q.$image.css({transform:"translate3D(0,0,0)"}),Q.swipe&&Q.$controls.filter(Q.delta<=Q.leftPosition?J.control_previous:J.control_next).trigger(L.click),M.startTimer(Q.resetTimer,Q.duration,function(){Q.$lightbox.removeClass(J.raw.animating)}))}function F(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}var G=b.Plugin("lightbox",{widget:!0,defaults:{customClass:"",extensions:["jpg","sjpg","jpeg","png","gif"],fixed:!1,formatter:a.noop,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600},classes:["loading","animating","fixed","mobile","inline","iframed","open","overlay","close","loading_icon","container","content","image","video","video_wrapper","meta","control","control_previous","control_next","control_disabled","position","position_current","position_total","caption","iframe","error"],methods:{_construct:d,_destruct:e,resize:h},utilities:{_initialize:f,close:i}}),H=G.namespace,I=G.defaults,J=G.classes,K=J.raw,L=G.events,M=G.functions,N=b.window,O=b.$window,P=null,Q=null;L.open="open",L.close="close",a(function(){P=b.$body})}(jQuery,Formstone),/*! Formstone v0.0.1 [mediaquery.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(b){b=b||{};for(var c in t)t.hasOwnProperty(c)&&(m[c]=b[c]?a.merge(b[c],m[c]):m[c]);m=a.extend(m,b),m.minWidth.sort(h),m.maxWidth.sort(g),m.minHeight.sort(h),m.maxHeight.sort(g);for(var d in t)if(t.hasOwnProperty(d)){s[d]={};for(var f in m[d])if(m[d].hasOwnProperty(f)){var i=window.matchMedia("("+t[d]+": "+(1/0===m[d][f]?1e5:m[d][f])+m.unit+")");i.addListener(e),s[d][m[d][f]]=i}}e()}function d(){q={unit:m.unit};for(var a in t)if(t.hasOwnProperty(a))for(var b in s[a])if(s[a].hasOwnProperty(b)&&s[a][b].matches){var c="Infinity"===b?1/0:parseInt(b,10);a.indexOf("max")>-1?(!q[a]||c<q[a])&&(q[a]=c):(!q[a]||c>q[a])&&(q[a]=c)}}function e(){d(),o.trigger(n.change,[q])}function f(a){var b=i(a.media),c=r[b],d=a.matches?n.enter:n.leave;if(c.active||!c.active&&a.matches){for(var e in c[d])c[d].hasOwnProperty(e)&&c[d][e].apply(c.mq);c.active=!0}}function g(a,b){return b-a}function h(a,b){return a-b}function i(a){return a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"")}function j(){return q}function k(a,b){var c=i(a);r[c]||(r[c]={mq:p.matchMedia(a),active:!1,enter:[],leave:[]},r[c].mq.addListener(f));for(var d in b)b.hasOwnProperty(d)&&r[c].hasOwnProperty(d)&&r[c][d].push(b[d]);f(r[c].mq)}function l(a){var b=i(a);r[b]&&(r[b].mq.removeListener(f),r=r.splice(r.indexOf(r[b]),1))}var m=(b.Plugin("mediaquery",{utilities:{_initialize:c,state:j,bind:k,unbind:l}}),{minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"}),n={change:"change",enter:"enter",leave:"leave"},o=b.$window,p=o[0],q=null,r=[],s={},t={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone),/*! Formstone v0.0.1 [navigation.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(b){b.enabled=!1,b.open=!1,this.addClass([l.base,b.customClass].join(" ")).wrapInner('<div class="'+l.container+'"></div>'),b.$container=this.find(k.container),b.$handle=b.handle?a(b.handle).addClass(l.handle):a('<span class="'+l.handle+'"></span>').prependTo(this),b.label&&b.$handle.text(b.labels.closed),b.$handle.touch({tap:!0}).on([m.tap,m.click].join(" "),b,i),a.mediaquery("bind","(max-width:"+(1/0===b.maxWidth?"100000px":b.maxWidth)+")",{enter:function(){g.call(b.$el,b)},leave:function(){h.call(b.$el,b)}})}function d(a){a.$handle.remove(),a.$container.contents().unwrap(),this.removeClass([l.base,l.enabled,l.open,a.customClass].join(" ")).off(m.namespace)}function e(a){a.enabled&&!a.open&&(a.label&&a.$handle.html(a.labels.open),this.addClass(l.open).trigger(m.open),a.open=!0)}function f(a){a.enabled&&a.open&&(a.label&&a.$handle.html(a.labels.closed),this.removeClass(l.open).trigger(m.close),a.open=!1)}function g(a){a.enabled||(this.addClass(l.enabled),a.enabled=!0,a.open=!0,f.call(this,a))}function h(a){a.enabled&&(this.removeClass([l.enabled,l.open].join(" ")),a.enabled=!1)}function i(b){n.killEvent(b);var c=b.data;a(k.base).not(c.$el)[j.namespace]("close"),c.open?f.call(c.$el,c):e.call(c.$el,c)}var j=b.Plugin("navigation",{widget:!0,defaults:{customClass:"",handle:null,label:!0,labels:{closed:"Navigation",open:"Close"},maxWidth:"980px"},classes:["handle","container","enabled","open"],events:["tap"],methods:{_construct:c,_destruct:d,open:e,close:f,enable:g,disable:h}}),k=j.classes,l=k.raw,m=j.events,n=j.functions;m.open="open",m.close="close"}(jQuery,Formstone),/*! Formstone v0.0.1 [tooltip.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(a){this.on(o.mouseEnter,a,e)}function d(){j(),this.off(o.namespace)}function e(a){j();var b=a.data;b.left=a.pageX,b.top=a.pageY,h(b)}function f(a){var b=a.data;p.clearTimer(b.timer),j()}function g(a){i(a.pageX,a.pageY)}function h(c){j();var d="";d+='<div class="',d+=[n.base,n[c.direction]].join(" "),d+='">',d+='<div class="'+n.content+'">',d+=c.formatter.call(c.$el,c),d+='<span class="'+n.caret+'"></span>',d+="</div>",d+="</div>",q={$tooltip:a(d),$el:c.$el},b.$body.append(q.$tooltip);var e=q.$tooltip.find(m.content),h=q.$tooltip.find(m.caret),k=c.$el.offset(),l=c.$el.outerHeight(),r=c.$el.outerWidth(),s=0,t=0,u=0,v=0,w=!1,x=!1,y=h.outerHeight(!0),z=h.outerWidth(!0),A=e.outerHeight(!0),B=e.outerWidth(!0);"right"===c.direction||"left"===c.direction?(x=(A-y)/2,v=-A/2,"right"===c.direction?u=c.margin:"left"===c.direction&&(u=-(B+c.margin))):(w=(B-z)/2,u=-B/2,"bottom"===c.direction?v=c.margin:"top"===c.direction&&(v=-(A+c.margin))),e.css({top:v,left:u}),h.css({top:x,left:w}),c.follow?c.$el.on(o.mouseMove,c,g):(c.match?"right"===c.direction||"left"===c.direction?(t=c.top,"right"===c.direction?s=k.left+r:"left"===c.direction&&(s=k.left)):(s=c.left,"bottom"===c.direction?t=k.top+l:"top"===c.direction&&(t=k.top)):"right"===c.direction||"left"===c.direction?(t=k.top+l/2,"right"===c.direction?s=k.left+r:"left"===c.direction&&(s=k.left)):(s=k.left+r/2,"bottom"===c.direction?t=k.top+l:"top"===c.direction&&(t=k.top)),i(s,t)),c.timer=p.startTimer(c.timer,c.delay,function(){q.$tooltip.addClass(n.visible)}),c.$el.one(o.mouseLeave,c,f)}function i(a,b){q&&q.$tooltip.css({left:a,top:b})}function j(){q&&(q.$el.off([o.mouseMove,o.mouseLeave].join(" ")),q.$tooltip.remove(),q=null)}function k(){return this.data("title")}var l=b.Plugin("tooltip",{widget:!0,defaults:{delay:0,direction:"top",follow:!1,formatter:k,margin:15,match:!1},classes:["content","caret","visible","top","bottom","right","left"],methods:{_construct:c,_destruct:d}}),m=l.classes,n=m.raw,o=l.events,p=l.functions,q=null}(jQuery,Formstone),/*! Formstone v0.0.1 [touch.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(a){a.touches=[],m(this,"none"),a.tap?(a.pan=!1,a.scale=!1,this.on(p.touchStart,a,f).on(p.click,a,i)):(a.pan||a.scale)&&(a.tap=!1,this.on([p.touchStart,p.pointerDown].join(" "),a,e),a.pan&&this.on(p.mouseDown,a,f))}function d(){m(this.off(p.namespace),"")}function e(a){a.preventManipulation&&a.preventManipulation(),q.killEvent(a);var b=a.data,c=a.originalEvent;if(c.type.match(/(up|end)$/i))return void h(a);if(c.pointerId){var d=!1;for(var e in b.touches)b.touches[e].id===c.pointerId&&(d=!0,b.touches[e].pageX=c.clientX,b.touches[e].pageY=c.clientY);d||b.touches.push({id:c.pointerId,pageX:c.clientX,pageY:c.clientY})}else b.touches=c.touches;c.type.match(/(down|start)$/i)?f(a):c.type.match(/move$/i)&&g(a)}function f(b){b.stopPropagation();var c=b.data,d="undefined"!==a.type(b.originalEvent.touches)?b.originalEvent.touches[0]:null;if(c.startE=b.originalEvent,c.startX=d?d.pageX:b.pageX,c.startY=d?d.pageY:b.pageY,c.scaleD=1,c.tap)c.clicked=!1,c.$el.on(p.touchMove,c,g).on([p.touchEnd,p.touchCancel].join(" "),c,h);else if(c.pan||c.scale){q.killEvent(b);var f=j(c.scale?p.scaleStart:p.panStart,b,c.startX,c.startY,c.scaleD,0,0);if(c.scale&&c.touches&&c.touches.length>=2){var i=c.touches;c.pinch={startX:k(i[0].pageX,i[1].pageX),startY:k(i[0].pageY,i[1].pageY),startD:l(i[1].pageX-i[0].pageX,i[1].pageY-i[0].pageY)},f.pageX=c.startX=c.pinch.startX,f.pageY=c.startY=c.pinch.startY}c.pan&&r.on(p.mouseMove,c,g).on(p.mouseUp,c,h),r.on([p.touchMove,p.touchEnd,p.touchCancel,p.pointerMove,p.pointerUp,p.pointerCancel].join(" "),c,e),c.$el.trigger(f)}}function g(b){var c=b.data,d="undefined"!==a.type(b.originalEvent.touches)?b.originalEvent.touches[0]:null,e=d?d.pageX:b.pageX,f=d?d.pageY:b.pageY,g=e-c.startX,h=f-c.startY;if(c.tap&&(Math.abs(e-c.startX)>10||Math.abs(f-c.startY)>10))c.$el.off([p.touchMove,p.touchEnd,p.touchCancel].join(" "));else if(c.pan||c.scale){var i=!0,m=j(c.scale?p.scale:p.pan,b,e,f,c.scaleD,g,h);if(c.scale)if(c.touches&&c.touches.length>=2){var n=c.touches;c.pinch.endX=k(n[0].pageX,n[1].pageX),c.pinch.endY=k(n[0].pageY,n[1].pageY),c.pinch.endD=l(n[1].pageX-n[0].pageX,n[1].pageY-n[0].pageY),c.scaleD=c.pinch.endD/c.pinch.startD,m.pageX=c.pinch.endX,m.pageY=c.pinch.endY,m.scale=c.scaleD,m.deltaX=c.pinch.endX-c.pinch.startX,m.deltaY=c.pinch.endY-c.pinch.startY}else c.pan||(i=!1);i&&c.$el.trigger(m)}}function h(b){var c=b.data;if(c.tap)c.$el.off([p.touchMove,p.touchEnd,p.touchCancel,p.mouseMove,p.mouseUp].join(" ")),c.startE.preventDefault(),i(b);else if(c.pan||c.scale){var d="undefined"!==a.type(b.originalEvent.touches)?b.originalEvent.touches[0]:null,e=d?d.pageX:b.pageX,f=d?d.pageY:b.pageY,g=e-c.startX,h=f-c.startY,k=j(c.scale?p.scaleEnd:p.panEnd,b,e,f,c.scaleD,g,h);r.off([p.touchMove,p.touchEnd,p.touchCancel,p.mouseMove,p.mouseUp,p.pointerMove,p.pointerUp,p.pointerCancel].join(" ")),c.$el.trigger(k),c.touches=[],c.scale}}function i(a){q.killEvent(a);var b=a.data;if(!b.clicked){"click"!==a.type&&(b.clicked=!0);var c=b.startE?b.startX:a.pageX,d=b.startE?b.startY:a.pageY,e=j(p.tap,a.originalEvent,c,d,1,0,0);b.$el.trigger(e)}}function j(b,c,d,e,f,g,h){return a.Event(b,{pageX:d,pageY:e,scale:f,deltaX:g,deltaY:h,originalEvent:c,bubbles:!0})}function k(a,b){return(a+b)/2}function l(a,b){return Math.sqrt(a*a+b*b)}function m(a,b){a.css({"-ms-touch-action":b,"touch-action":b})}var n=!b.window.PointerEvent,o=b.Plugin("touch",{widget:!0,defaults:{pan:!1,scale:!1,tap:!1},methods:{_construct:c,_destruct:d},events:{pointerDown:n?"MSPointerDown":"pointerdown",pointerUp:n?"MSPointerUp":"pointerup",pointerMove:n?"MSPointerMove":"pointermove",pointerCancel:n?"MSPointerCancel":"pointercancel"}}),p=o.events,q=o.functions,r=b.$window;p.tap="tap",p.pan="pan",p.panStart="panstart",p.panEnd="panend",p.scale="scale",p.scaleStart="scalestart",p.scaleEnd="scaleend"}(jQuery,Formstone),/*! Formstone v0.0.1 [transition.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(a,c){if(c){a.$target=this.find(a.target),a.$check=a.target?a.$target:this,a.callback=c,a.styles=h(a.$check),a.timer=null;var d=a.$check.css(b.transitionProperty+"-duration");b.support.transition&&d&&parseFloat(d)?this.on(k.transitionEnd,a,e):a.timer=l.startTimer(a.timer,50,function(){g(a)},!0)}}function d(){this.off(k.namespace)}function e(b){b.stopPropagation(),b.preventDefault();var c=b.data,d=b.originalEvent,e=!c.property||d&&d.propertyName===c.property,g=!c.target||d&&a(d.target).is(c.$target),h=g||!c.target&&d&&a(d.target).is(c.$el);e&&g&&h&&f(c)}function f(a){a.always||(l.clearTimer(a.timer,!0),a.$el[j.namespace]("destroy")),a.callback.apply(a.$el)}function g(a){var b=h(a.$check);i(a.styles,b)||f(a),a.styles=b}function h(b){var c,d,e,f={};if(b instanceof a&&(b=b[0]),m.getComputedStyle){c=m.getComputedStyle(b,null);for(var g=0,h=c.length;h>g;g++)d=c[g],e=c.getPropertyValue(d),f[d]=e}else if(b.currentStyle){c=b.currentStyle;for(d in c)c.hasOwnProperty(c)&&(f[d]=c[d])}return f}function i(b,c){if(a.type(b)!==a.type(c))return!1;for(var d in b)if(!b.hasOwnProperty(d)||!c.hasOwnProperty(d)||b[d]!==c[d])return!1;return!0}var j=b.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:c,_destruct:d,resolve:f}}),k=j.events,l=j.functions,m=b.window}(jQuery,Formstone),/*! Formstone v0.0.1 [upload.js] 2014-12-02 | MIT License | formstone.it */
!function(a,b){"use strict";function c(a){if(b.support.file){var c="";c+='<div class="'+p.dropzone+'">',c+=a.label,c+="</div>",c+='<input class="'+p.input+'" type="file"',a.maxQueue>1&&(c+=" "+p.multiple),c+=">",this.addClass(p.base).append(c),a.$input=this.find(o.input),a.queue=[],a.total=0,a.uploading=!1,this.on(q.click,o.dropzone,a,e).on(q.dragEnter,a,g).on(q.dragOver,a,h).on(q.dragLeave,a,i).on(q.drop,o.dropzone,a,j),a.$input.on(q.change,a,f)}}function d(a){b.support.file&&(a.$input.off(q.namespace),this.off([q.click,q.dragEnter,q.dragOver,q.dragLeave,q.drop].join(" ")).removeClass(p.base).html(""))}function e(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$input.trigger(q.click)}function f(a){a.stopPropagation(),a.preventDefault();var b=a.data,c=b.$input[0].files;c.length&&k(b,c)}function g(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$el.addClass(p.dropping)}function h(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$el.addClass(p.dropping)}function i(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$el.removeClass(p.dropping)}function j(a){a.preventDefault();var b=a.data,c=a.originalEvent.dataTransfer.files;b.$el.removeClass(p.dropping),k(b,c)}function k(a,b){for(var c=[],d=0;d<b.length;d++){var e={index:a.total++,file:b[d],name:b[d].name,size:b[d].size,started:!1,complete:!1,error:!1,transfer:null};c.push(e),a.queue.push(e)}a.uploading||(r.on(q.beforeUnload,function(){return a.leave}),a.uploading=!0),a.$el.trigger(q.start,[c]),l(a)}function l(a){var b=0,c=[];for(var d in a.queue)!a.queue.hasOwnProperty(d)||a.queue[d].complete||a.queue[d].error||c.push(a.queue[d]);a.queue=c;for(var e in a.queue)if(a.queue.hasOwnProperty(e)){if(!a.queue[e].started){var f=new FormData;f.append(a.postKey,a.queue[e].file);for(var g in a.postData)a.postData.hasOwnProperty(g)&&f.append(g,a.postData[g]);m(a,a.queue[e],f)}if(b++,b>=a.maxQueue)return;d++}0===b&&(r.off(q.beforeUnload),a.uploading=!1,a.$el.trigger(q.complete))}function m(b,c,d){c.size>=b.maxSize?(c.error=!0,b.$el.trigger(q.fileError,[c,"Too large"]),l(b)):(c.started=!0,c.transfer=a.ajax({url:b.action,data:d,type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){var d=a.ajaxSettings.xhr();return d.upload&&d.upload.addEventListener("progress",function(a){var d=0,e=a.loaded||a.position,f=a.total;a.lengthComputable&&(d=Math.ceil(e/f*100)),b.$el.trigger(q.fileProgress,[c,d])},!1),d},beforeSend:function(){b.$el.trigger(q.fileStart,[c])},success:function(a){c.complete=!0,b.$el.trigger(q.fileComplete,[c,a]),l(b)},error:function(a,d,e){c.error=!0,b.$el.trigger(q.fileError,[c,e]),l(b)}}))}var n=b.Plugin("upload",{widget:!0,defaults:{customClass:"",action:"",label:"Drag and drop files or click to select",leave:"You have uploads pending, are you sure you want to leave this page?",maxQueue:2,maxSize:5242880,postData:{},postKey:"file"},classes:["input","dropzone","multiple","dropping"],methods:{_construct:c,_destruct:d}}),o=n.classes,p=o.raw,q=n.events,r=(n.functions,b.$window);q.complete="complete",q.fileStart="filestart",q.fileProgress="fileprogress",q.fileComplete="filecomplete",q.fileError="fileerror",q.start="start"}(jQuery,Formstone);