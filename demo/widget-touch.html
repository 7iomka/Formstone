<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

		<title>Tooltip Demo</title>

		<!-- Modernizer -->
		<script src="http://formstone.it/js/modernizr.js"></script>

		<!-- Demo Resources -->
		<link href="http://formstone.it/css/demo.css" rel="stylesheet" type="text/css" media="all">
		<script src="http://formstone.it/js/demo.js"></script>

		<!--[if IE 8]>
        	<script>var IE8 = true;</script>
        	<script src="http://formstone.it/js/site.ie8.js"></script>
			<link rel="stylesheet" href="http://formstone.it/css/demo.ie8.css">
		<![endif]-->
		<!--[if IE 9]>
        	<script>var IE9 = true;</script>
        	<script src="http://formstone.it/js/site.ie9.js"></script>
		<![endif]-->

		<script src="../dist/core.js"></script>

		<script src="../dist/widget/touch.js"></script>

		<!--[DEMO:START-RESOURCES]-->

		<style>
			.panit {
				height: 50px;
				width:  50px;

				position: absolute;
				top:  50px;
				left: 50px;

				background: red;
			}

			.tapit {
				background: green;

				height: 20px;
				width:  200px;

				margin: 10px auto;
			}
			.tapit.active {
				background: blue;
			}

			.scaleit {
				height: 50px;
				width:  50px;

				position: absolute;
				top:  150px;
				left: 150px;

				background: purple;
			}
		</style>

		<script>
			$(document).ready(function() {

				var diffX = 0,
					diffY = 0,
					minX = 10,
					maxX = 200
					minY = 10,
					maxY = 200,
					sDiffX = 0,
					sDiffY = 0,
					sOrigH = 0,
					sOrigW = 0;

				// Pan

				$(".panit").touch({
					pan: true
				}).on("panstart.panit", function(e) {
					var offset = $(".panit").offset();

					diffX = offset.left - e.pageX;
					diffY = offset.top  - e.pageY;

					console.log(e);
				})
				.on("panend.panit", function(e) {
				})
				.on("pan.panit", function(e) {
					var data = e.data,
						x = e.pageX + diffX,
						y = e.pageY + diffY;

					if (x < minX) {
						x = minX;
					}
					if (x > maxX) {
						x = maxX;
					}

					if (y < minY) {
						y = minY;
					}
					if (y > maxY) {
						y = maxY;
					}

					$(".panit").css({
						left: x,
						top: y
					})
				});

				// Tap

				$(".tapit").touch({
					tap: true
				}).on("tap.tapit", function(e) {
					$(".tapit").toggleClass("active");
				});

				// Scale

				$(".scaleit").touch({
					scale: true
				}).on("scalestart.scaleit", function(e) {
					var offset = $(".scaleit").offset();

					sDiffX = offset.left - e.pageX;
					sDiffY = offset.top  - e.pageY;

					sOrigH = $(".scaleit").outerHeight();
					sOrigW = $(".scaleit").outerWidth();

					console.log(e);
				})
				.on("scaleend.scaleit", function(e) {
				})
				.on("scale.scaleit", function(e) {
					var data = e.data,
						w = sOrigW * e.scale,
						h = sOrigH * e.scale;

					var data = e.data,
						x = e.pageX + sDiffX,
						y = e.pageY + sDiffY;

					$(".scaleit").css({
						height: h,
						width: w,
						left: x,
						top: y
					})
				});

			});
		</script>

		<!--[DEMO:END-RESOURCES]-->

	</head>
	<body class="gridlock demo">

		<div class="panit"></div>

		<div class="tapit"></div>

		<div class="scaleit"></div>

	</body>
</html>